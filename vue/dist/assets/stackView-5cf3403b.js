import{d as Y,u as pe,g as U,_ as $e,c as a,a as le,P as X,D as ie,f as Me,w as Xe,b as Ye,e as Ze,h as Se,M as ue,i as et,j as tt,F as de,k as nt,l as at,o as p,m as B,n as s,p as u,q as d,r as e,s as z,t as rt,v as c,x as T,y as S,z as oe,A as se,B as ot,C as V,E as st,G as lt,H as it,S as ut,I as dt,J as ct,K as pt,L as xe,N as mt,O as vt,Q as ft,R as kt,T as Ct,U as bt,V as gt,W as yt}from"./index-5f58fa79.js";import{S as W,s as _t,L as ht,R as wt,f as It}from"./fullScreenContextMenu-d2d04eb2.js";import{F as D,N as St,_ as xt}from"./numInput-1258aa0e.js";/* empty css              */import{D as Ae}from"./index-6593cfe3.js";/* empty css              *//* empty css              */import{u as Pt,a as $t,b as Mt,c as At,d as Rt,e as Bt,f as Dt,s as Nt,g as Ft,F as Et}from"./FileItem-7a24456f.js";import"./functionalCallableComp-9a9cbacb.js";import"./db-5a33988f.js";var zt=["class","style"],Tt=function(){return{prefixCls:String,href:String,separator:X.any,overlay:X.any,onClick:Function}};const q=Y({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Tt(),slots:["separator","overlay"],setup:function(o,h){var f=h.slots,k=h.attrs,w=pe("breadcrumb",o),g=w.prefixCls,x=function(I,v){var i=U(f,o,"overlay");return i?a(Ae,{overlay:i,placement:"bottom"},{default:function(){return[a("span",{class:"".concat(v,"-overlay-link")},[I,a(ie,null,null)])]}}):I};return function(){var P,I=(P=U(f,o,"separator"))!==null&&P!==void 0?P:"/",v=U(f,o),i=k.class,C=k.style,m=$e(k,zt),b;return o.href!==void 0?b=a("a",le({class:"".concat(g.value,"-link"),onClick:o.onClick},m),[v]):b=a("span",le({class:"".concat(g.value,"-link"),onClick:o.onClick},m),[v]),b=x(b,g.value),v?a("span",{class:i,style:C},[b,I&&a("span",{class:"".concat(g.value,"-separator")},[I])]):null}}});var Vt=function(){return{prefixCls:String,routes:{type:Array},params:X.any,separator:X.any,itemRender:{type:Function}}};function Ot(r,o){if(!r.breadcrumbName)return null;var h=Object.keys(o).join("|"),f=r.breadcrumbName.replace(new RegExp(":(".concat(h,")"),"g"),function(k,w){return o[w]||k});return f}function Pe(r){var o=r.route,h=r.params,f=r.routes,k=r.paths,w=f.indexOf(o)===f.length-1,g=Ot(o,h);return w?a("span",null,[g]):a("a",{href:"#/".concat(k.join("/"))},[g])}const O=Y({compatConfig:{MODE:3},name:"ABreadcrumb",props:Vt(),slots:["separator","itemRender"],setup:function(o,h){var f=h.slots,k=pe("breadcrumb",o),w=k.prefixCls,g=k.direction,x=function(i,C){return i=(i||"").replace(/^\//,""),Object.keys(C).forEach(function(m){i=i.replace(":".concat(m),C[m])}),i},P=function(i,C,m){var b=et(i),y=x(C||"",m);return y&&b.push(y),b},I=function(i){var C=i.routes,m=C===void 0?[]:C,b=i.params,y=b===void 0?{}:b,N=i.separator,$=i.itemRender,M=$===void 0?Pe:$,F=[];return m.map(function(_){var A=x(_.path,y);A&&F.push(A);var j=[].concat(F),L=null;return _.children&&_.children.length&&(L=a(ue,null,{default:function(){return[_.children.map(function(E){return a(ue.Item,{key:E.path||E.breadcrumbName},{default:function(){return[M({route:E,params:y,routes:m,paths:P(j,E.path,y)})]}})})]}})),a(q,{overlay:L,separator:N,key:A||_.breadcrumbName},{default:function(){return[M({route:_,params:y,routes:m,paths:j})]}})})};return function(){var v,i,C,m=o.routes,b=o.params,y=b===void 0?{}:b,N=Me(U(f,o)),$=(v=U(f,o,"separator"))!==null&&v!==void 0?v:"/",M=o.itemRender||f.itemRender||Pe;m&&m.length>0?C=I({routes:m,params:y,separator:$,itemRender:M}):N.length&&(C=N.map(function(_,A){return Xe(Ye(_.type)==="object"&&(_.type.__ANT_BREADCRUMB_ITEM||_.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Ze(_,{separator:$,key:A})}));var F=(i={},Se(i,w.value,!0),Se(i,"".concat(w.value,"-rtl"),g.value==="rtl"),i);return a("div",{class:F},[C])}}});var jt=["separator","class"],Lt=function(){return{prefixCls:String}};const ce=Y({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Lt(),setup:function(o,h){var f=h.slots,k=h.attrs,w=pe("breadcrumb",o),g=w.prefixCls;return function(){var x;k.separator;var P=k.class,I=$e(k,jt),v=Me((x=f.default)===null||x===void 0?void 0:x.call(f));return a("span",le({class:["".concat(g.value,"-separator"),P]},I),[v.length>0?v:"/"])}}});O.Item=q;O.Separator=ce;O.install=function(r){return r.component(O.name,O),r.component(q.name,q),r.component(ce.name,ce),r};D.useInjectFormItemContext=tt;D.ItemRest=de;D.install=function(r){return r.component(D.name,D),r.component(D.Item.name,D.Item),r.component(de.name,de),r};W.setDefaultIndicator=_t;W.install=function(r){return r.component(W.name,W),r};const Ut={class:"hint"},Wt={class:"location-bar"},qt={key:0,class:"breadcrumb"},Kt=["onClick"],Gt={key:3,class:"location-act"},Qt={class:"actions"},Ht=["onClick"],Jt={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Xt={style:{padding:"4px"}},Yt={style:{padding:"4px"}},Zt={key:0,class:"view"},en={style:{padding:"16px 0 32px"}},tn={key:0,class:"preview-switch"},nn=Y({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},walkModePath:{},stackKey:{}},setup(r){const o=r,h=nt(),{scroller:f,stackViewEl:k,props:w,multiSelectedIdxs:g,spinning:x}=Pt().toRefs(),{currPage:P,refresh:I,copyLocation:v,back:i,openNext:C,stack:m,quickMoveTo:b,addToSearchScanPathAndQuickMove:y,searchPathInfo:N,locInputValue:$,isLocationEditing:M,onLocEditEnter:F,onEditBtnClick:_,share:A,selectAll:j,onCreateFloderBtnClick:L,onWalkBtnClick:K,showWalkButton:E,searchInCurrentDir:Z}=$t(),{gridItems:Re,sortMethodConv:Be,moreActionsDropdownShow:ee,sortedFiles:G,sortMethod:te,itemSize:me,loadNextDir:De,loadNextDirLoading:Ne,canLoadNext:Fe,onScroll:Ee,cellWidth:Q}=Mt(),{onDrop:ze,onFileDragStart:Te,onFileDragEnd:Ve}=At(),{onFileItemClick:Oe,onContextMenuClick:ve,showGenInfo:H,imageGenInfo:fe,q:je}=Rt({openNext:C}),{previewIdx:J,onPreviewVisibleChange:Le,previewing:ke,previewImgMove:Ce,canPreview:be}=Bt(),{showMenuIdx:ne}=Dt();return at(()=>o,()=>{w.value=o;const l=Nt.get(o.stackKey??"");l&&(m.value=l.slice())},{immediate:!0}),(l,t)=>{const Ue=mt,We=vt,qe=ft,ge=q,ye=O,Ke=kt,Ge=Ct,_e=bt,ae=gt,he=ue,re=Ae,Qe=St,we=xt,He=D,Je=W;return p(),B(Je,{spinning:e(x),size:"large"},{default:s(()=>[a(Ue,{style:{display:"none"}}),u("div",{ref_key:"stackViewEl",ref:k,onDragover:t[27]||(t[27]=d(()=>{},["prevent"])),onDrop:t[28]||(t[28]=d(n=>e(ze)(n),["prevent"])),class:"container"},[a(qe,{visible:e(H),"onUpdate:visible":t[1]||(t[1]=n=>z(H)?H.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>H.value=!1)},{cancelText:s(()=>[]),default:s(()=>[a(We,{active:"",loading:!e(je).isIdle},{default:s(()=>[u("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(rt)(e(fe)))},[u("div",Ut,c(l.$t("doubleClickToCopy")),1),T(" "+c(e(fe)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),u("div",Wt,[o.walkModePath?(p(),S("div",qt,[a(Ke,null,{title:s(()=>[T(c(l.$t("walk-mode-move-message")),1)]),default:s(()=>[a(ye,{style:{flex:"1"}},{default:s(()=>[(p(!0),S(oe,null,se(e(m),(n,R)=>(p(),B(ge,{key:R},{default:s(()=>[u("span",null,c(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),1)]),_:2},1024))),128))]),_:1})]),_:1})])):(p(),S("div",{key:1,class:"breadcrumb",style:ot({flex:e(M)?1:""})},[e(M)?(p(),B(Ge,{key:0,style:{flex:"1"},value:e($),"onUpdate:value":t[3]||(t[3]=n=>z($)?$.value=n:null),onClick:t[4]||(t[4]=d(()=>{},["stop"])),onKeydown:t[5]||(t[5]=d(()=>{},["stop"])),onPressEnter:e(F),"allow-clear":""},null,8,["value","onPressEnter"])):(p(),B(ye,{key:1,style:{flex:"1"}},{default:s(()=>[(p(!0),S(oe,null,se(e(m),(n,R)=>(p(),B(ge,{key:R},{default:s(()=>[u("a",{onClick:d(Ie=>e(i)(R),["prevent"])},c(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),9,Kt)]),_:2},1024))),128))]),_:1})),e(M)?(p(),B(_e,{key:2,size:"small",onClick:e(F),type:"primary"},{default:s(()=>[T(c(l.$t("go")),1)]),_:1},8,["onClick"])):(p(),S("div",Gt,[u("a",{onClick:t[6]||(t[6]=d((...n)=>e(v)&&e(v)(...n),["prevent"])),class:"copy"},c(l.$t("copy")),1),u("a",{onClick:t[7]||(t[7]=d((...n)=>e(_)&&e(_)(...n),["prevent","stop"]))},c(l.$t("edit")),1)]))],4)),u("div",Qt,[u("a",{class:"opt",onClick:t[8]||(t[8]=d((...n)=>e(I)&&e(I)(...n),["prevent"]))},c(l.$t("refresh")),1),a(re,null,{overlay:s(()=>[a(he,null,{default:s(()=>[a(ae,{key:"tag-search"},{default:s(()=>[u("a",{onClick:t[10]||(t[10]=d(n=>e(Z)("tag-search"),["prevent"]))},c(l.$t("imgSearch")),1)]),_:1}),a(ae,{key:"tag-search"},{default:s(()=>[u("a",{onClick:t[11]||(t[11]=d(n=>e(Z)("fuzzy-search"),["prevent"]))},c(l.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:s(()=>[u("a",{class:"opt",onClick:t[9]||(t[9]=d(()=>{},["prevent"]))},[T(c(l.$t("search"))+" ",1),a(e(ie))])]),_:1}),e(E)?(p(),S("a",{key:0,class:"opt",onClick:t[12]||(t[12]=d((...n)=>e(K)&&e(K)(...n),["prevent"]))}," Walk ")):V("",!0),u("a",{class:"opt",onClick:t[13]||(t[13]=d((...n)=>e(j)&&e(j)(...n),["prevent","stop"]))},c(l.$t("selectAll")),1),e(st)?V("",!0):(p(),S("a",{key:1,class:"opt",onClick:t[14]||(t[14]=d((...n)=>e(A)&&e(A)(...n),["prevent"]))},c(l.$t("share")),1)),a(re,null,{overlay:s(()=>[a(he,null,{default:s(()=>[(p(!0),S(oe,null,se(e(h).quickMovePaths,n=>(p(),B(ae,{key:n.dir},{default:s(()=>[u("a",{onClick:d(R=>e(b)(n.dir),["prevent"])},c(n.zh),9,Ht)]),_:2},1024))),128))]),_:1})]),default:s(()=>[u("a",{class:"opt",onClick:t[15]||(t[15]=d(()=>{},["prevent"]))},[T(c(l.$t("quickMove"))+" ",1),a(e(ie))])]),_:1}),a(re,{trigger:["click"],visible:e(ee),"onUpdate:visible":t[23]||(t[23]=n=>z(ee)?ee.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:s(()=>[u("div",Jt,[a(He,lt(it({labelCol:{span:6},wrapperCol:{span:18}})),{default:s(()=>[a(we,{label:l.$t("gridCellWidth")},{default:s(()=>[a(Qe,{modelValue:e(Q),"onUpdate:modelValue":t[17]||(t[17]=n=>z(Q)?Q.value=n:null),max:1024,min:64,step:64},null,8,["modelValue"])]),_:1},8,["label"]),a(we,{label:l.$t("sortingMethod")},{default:s(()=>[a(e(ut),{value:e(te),"onUpdate:value":t[18]||(t[18]=n=>z(te)?te.value=n:null),onClick:t[19]||(t[19]=d(()=>{},["stop"])),conv:e(Be),options:e(dt)},null,8,["value","conv","options"])]),_:1},8,["label"]),u("div",Xt,[e(N)?e(N).can_delete?(p(),S("a",{key:1,onClick:t[21]||(t[21]=d((...n)=>e(y)&&e(y)(...n),["prevent"]))},c(l.$t("removeFromSearchScanPathAndQuickMove")),1)):V("",!0):(p(),S("a",{key:0,onClick:t[20]||(t[20]=d((...n)=>e(y)&&e(y)(...n),["prevent"]))},c(l.$t("addToSearchScanPathAndQuickMove")),1))]),u("div",Yt,[u("a",{onClick:t[22]||(t[22]=d((...n)=>e(L)&&e(L)(...n),["prevent"]))},c(l.$t("createFolder")),1)])]),_:1},16)])]),default:s(()=>[u("a",{class:"opt",onClick:t[16]||(t[16]=d(()=>{},["prevent"]))},c(l.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(P)?(p(),S("div",Zt,[a(e(Ft),{class:"file-list",items:e(G),ref_key:"scroller",ref:f,onScroll:e(Ee),"item-size":e(me).first,"key-field":"fullpath","item-secondary-size":e(me).second,gridItems:e(Re)},ct({default:s(({item:n,index:R})=>[a(Et,{idx:parseInt(R),file:n,"full-screen-preview-image-url":e(G)[e(J)]?e(pt)(e(G)[e(J)]):"","show-menu-idx":e(ne),"onUpdate:showMenuIdx":t[24]||(t[24]=Ie=>z(ne)?ne.value=Ie:null),selected:e(g).includes(R),"cell-width":e(Q),onFileItemClick:e(Oe),onDragstart:e(Te),onDragend:e(Ve),onPreviewVisibleChange:e(Le),onContextMenuClick:e(ve),"is-selected-mutil-files":e(g).length>1},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","is-selected-mutil-files"])]),_:2},[o.walkModePath?{name:"after",fn:s(()=>[u("div",en,[a(_e,{onClick:e(De),loading:e(Ne),block:"",type:"primary",disabled:!e(Fe),ghost:""},{default:s(()=>[T(c(l.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])])]),key:"0"}:void 0]),1032,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(ke)?(p(),S("div",tn,[a(e(ht),{onClick:t[25]||(t[25]=n=>e(Ce)("prev")),class:xe({disable:!e(be)("prev")})},null,8,["class"]),a(e(wt),{onClick:t[26]||(t[26]=n=>e(Ce)("next")),class:xe({disable:!e(be)("next")})},null,8,["class"])])):V("",!0)])):V("",!0)],544),e(ke)?(p(),B(It,{key:0,file:e(G)[e(J)],idx:e(J),onContextMenuClick:e(ve)},null,8,["file","idx","onContextMenuClick"])):V("",!0)]),_:1},8,["spinning"])}}});const vn=yt(nn,[["__scopeId","data-v-3465efc9"]]);export{vn as default};
