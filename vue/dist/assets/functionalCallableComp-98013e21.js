import{cQ as re,cR as le,d as Q,bq as oe,Z as O,l as q,_ as H,a as v,$ as z,h as M,c as f,P as ee,j as ae,u as ne,aI as ue,b0 as ie,aM as ce,aw as se,w as de,f as fe,ao as U,aK as ve,i as he,af as pe,c5 as G,Q as X,cS as me,K as Y,U as be,cy as ge,ah as K,al as ye,ak as xe,T as ke,co as Ce,x as we}from"./index-99c3016f.js";import{j as Se}from"./db-18699437.js";function Ie(a,e){var n=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=re(a))||e&&a&&typeof a.length=="number"){n&&(a=n);var r=0,i=function(){};return{s:i,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C=!0,b=!1,g;return{s:function(){n=n.call(a)},n:function(){var s=n.next();return C=s.done,s},e:function(s){b=!0,g=s},f:function(){try{!C&&n.return!=null&&n.return()}finally{if(b)throw g}}}}var Z=1/0,Oe=17976931348623157e292;function Ue(a){if(!a)return a===0?a:0;if(a=le(a),a===Z||a===-Z){var e=a<0?-1:1;return e*Oe}return a===a?a:0}var Pe=["prefixCls","name","id","type","disabled","readonly","tabindex","autofocus","value","required"],Me={prefixCls:String,name:String,id:String,type:String,defaultChecked:{type:[Boolean,Number],default:void 0},checked:{type:[Boolean,Number],default:void 0},disabled:Boolean,tabindex:{type:[Number,String]},readonly:Boolean,autofocus:Boolean,value:ee.any,required:Boolean};const _e=Q({compatConfig:{MODE:3},name:"Checkbox",inheritAttrs:!1,props:oe(Me,{prefixCls:"rc-checkbox",type:"checkbox",defaultChecked:!1}),emits:["click","change"],setup:function(e,n){var r=n.attrs,i=n.emit,C=n.expose,b=O(e.checked===void 0?e.defaultChecked:e.checked),g=O();q(function(){return e.checked},function(){b.value=e.checked}),C({focus:function(){var l;(l=g.value)===null||l===void 0||l.focus()},blur:function(){var l;(l=g.value)===null||l===void 0||l.blur()}});var d=O(),s=function(l){if(!e.disabled){e.checked===void 0&&(b.value=l.target.checked),l.shiftKey=d.value;var w={target:v(v({},e),{},{checked:l.target.checked}),stopPropagation:function(){l.stopPropagation()},preventDefault:function(){l.preventDefault()},nativeEvent:l};e.checked!==void 0&&(g.value.checked=!!e.checked),i("change",w),d.value=!1}},y=function(l){i("click",l),d.value=l.shiftKey};return function(){var o,l=e.prefixCls,w=e.name,S=e.id,V=e.type,_=e.disabled,k=e.readonly,t=e.tabindex,u=e.autofocus,h=e.value,p=e.required,m=H(e,Pe),c=r.class,I=r.onFocus,F=r.onBlur,A=r.onKeydown,B=r.onKeypress,E=r.onKeyup,D=v(v({},m),r),x=Object.keys(D).reduce(function(j,P){return(P.substr(0,5)==="aria-"||P.substr(0,5)==="data-"||P==="role")&&(j[P]=D[P]),j},{}),T=z(l,c,(o={},M(o,"".concat(l,"-checked"),b.value),M(o,"".concat(l,"-disabled"),_),o)),R=v(v({name:w,id:S,type:V,readonly:k,disabled:_,tabindex:t,class:"".concat(l,"-input"),checked:!!b.value,autofocus:u,value:h},x),{},{onChange:s,onClick:y,onFocus:I,onBlur:F,onKeydown:A,onKeypress:B,onKeyup:E,required:p});return f("span",{class:T},[f("input",v({ref:g},R),null),f("span",{class:"".concat(l,"-inner")},null)])}}});function qe(a){var e=a==null?0:a.length;return e?a[e-1]:void 0}var Be=function(){return{name:String,prefixCls:String,options:{type:Array,default:function(){return[]}},disabled:Boolean,id:String}},Fe=function(){return v(v({},Be()),{},{defaultValue:{type:Array},value:{type:Array},onChange:{type:Function},"onUpdate:value":{type:Function}})},Ve=function(){return{prefixCls:String,defaultChecked:{type:Boolean,default:void 0},checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:ee.any,name:String,id:String,indeterminate:{type:Boolean,default:void 0},type:{type:String,default:"checkbox"},autofocus:{type:Boolean,default:void 0},onChange:Function,"onUpdate:checked":Function,onClick:Function,skipGroup:{type:Boolean,default:!1}}},Ae=function(){return v(v({},Ve()),{},{indeterminate:{type:Boolean,default:!1}})},te=Symbol("CheckboxGroupContext"),je=["indeterminate","skipGroup","id"],Ne=["onMouseenter","onMouseleave","onInput","class","style"];const N=Q({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:Ae(),setup:function(e,n){var r=n.emit,i=n.attrs,C=n.slots,b=n.expose,g=ae(),d=ne("checkbox",e),s=d.prefixCls,y=d.direction,o=ue(te,void 0),l=Symbol("checkboxUniId");ie(function(){!e.skipGroup&&o&&o.registerValue(l,e.value)}),ce(function(){o&&o.cancelValue(l)}),se(function(){de(e.checked!==void 0||o||e.value===void 0,"Checkbox","`value` is not validate prop, do you mean `checked`?")});var w=function(t){var u=t.target.checked;r("update:checked",u),r("change",t)},S=O(),V=function(){var t;(t=S.value)===null||t===void 0||t.focus()},_=function(){var t;(t=S.value)===null||t===void 0||t.blur()};return b({focus:V,blur:_}),function(){var k,t,u=fe((k=C.default)===null||k===void 0?void 0:k.call(C)),h=e.indeterminate,p=e.skipGroup,m=e.id,c=m===void 0?g.id.value:m,I=H(e,je),F=i.onMouseenter,A=i.onMouseleave;i.onInput;var B=i.class,E=i.style,D=H(i,Ne),x=v(v({},I),{},{id:c,prefixCls:s.value},D);o&&!p?(x.onChange=function(){for(var j=arguments.length,P=new Array(j),$=0;$<j;$++)P[$]=arguments[$];r.apply(void 0,["change"].concat(P)),o.toggleOption({label:u,value:e.value})},x.name=o.name.value,x.checked=o.mergedValue.value.indexOf(e.value)!==-1,x.disabled=e.disabled||o.disabled.value,x.indeterminate=h):x.onChange=w;var T=z((t={},M(t,"".concat(s.value,"-wrapper"),!0),M(t,"".concat(s.value,"-rtl"),y.value==="rtl"),M(t,"".concat(s.value,"-wrapper-checked"),x.checked),M(t,"".concat(s.value,"-wrapper-disabled"),x.disabled),t),B),R=z(M({},"".concat(s.value,"-indeterminate"),h));return f("label",{class:T,style:E,onMouseenter:F,onMouseleave:A},[f(_e,v(v({},x),{},{class:R,ref:S}),null),u.length?f("span",null,[u]):null])}}}),W=Q({compatConfig:{MODE:3},name:"ACheckboxGroup",props:Fe(),setup:function(e,n){var r=n.slots,i=n.emit,C=n.expose,b=ae(),g=ne("checkbox",e),d=g.prefixCls,s=g.direction,y=O((e.value===void 0?e.defaultValue:e.value)||[]);q(function(){return e.value},function(){y.value=e.value||[]});var o=U(function(){return e.options.map(function(t){return typeof t=="string"||typeof t=="number"?{label:t,value:t}:t})}),l=O(Symbol()),w=O(new Map),S=function(u){w.value.delete(u),l.value=Symbol()},V=function(u,h){w.value.set(u,h),l.value=Symbol()},_=O(new Map);q(l,function(){var t=new Map,u=Ie(w.value.values()),h;try{for(u.s();!(h=u.n()).done;){var p=h.value;t.set(p,!0)}}catch(m){u.e(m)}finally{u.f()}_.value=t});var k=function(u){var h=y.value.indexOf(u.value),p=he(y.value);h===-1?p.push(u.value):p.splice(h,1),e.value===void 0&&(y.value=p);var m=p.filter(function(c){return _.value.has(c)}).sort(function(c,I){var F=o.value.findIndex(function(B){return B.value===c}),A=o.value.findIndex(function(B){return B.value===I});return F-A});i("update:value",m),i("change",m),b.onFieldChange()};return ve(te,{cancelValue:S,registerValue:V,toggleOption:k,mergedValue:y,name:U(function(){return e.name}),disabled:U(function(){return e.disabled})}),C({mergedValue:y}),function(){var t,u=e.id,h=u===void 0?b.id.value:u,p=null,m="".concat(d.value,"-group");return o.value&&o.value.length>0&&(p=o.value.map(function(c){var I;return f(N,{prefixCls:d.value,key:c.value.toString(),disabled:"disabled"in c?c.disabled:e.disabled,indeterminate:c.indeterminate,value:c.value,checked:y.value.indexOf(c.value)!==-1,onChange:c.onChange,class:"".concat(m,"-item")},{default:function(){return[c.label===void 0?(I=r.label)===null||I===void 0?void 0:I.call(r,c):c.label]}})})),f("div",{class:[m,M({},"".concat(m,"-rtl"),s.value==="rtl")],id:h},[p||((t=r.default)===null||t===void 0?void 0:t.call(r))])}}});N.Group=W;N.install=function(a){return a.component(N.name,N),a.component(W.name,W),a};var Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};const Ge=Ke;function J(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){De(a,i,n[i])})}return a}function De(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var L=function(e,n){var r=J({},e,n.attrs);return f(pe,J({},r,{icon:Ge}),null)};L.displayName="DownloadOutlined";L.inheritAttrs=!1;const $e=L,He=async a=>(await G.value.get("/files",{params:{folder_path:a}})).data,ze=async a=>(await G.value.post("/delete_files",{file_paths:a})).data,We=async(a,e,n)=>(await G.value.post("/move_files",{file_paths:a,dest:e,create_dest_folder:n})).data,Qe=async(a,e,n)=>(await G.value.post("/copy_files",{file_paths:a,dest:e,create_dest_folder:n})).data,Ee=async a=>{await G.value.post("/mkdirs",{dest_folder:a})},Xe=a=>{const e=[];return a.shiftKey&&e.push("Shift"),a.ctrlKey&&e.push("Ctrl"),a.metaKey&&e.push("Cmd"),(a.code.startsWith("Key")||a.code.startsWith("Digit"))&&e.push(a.code),e.join(" + ")},Le=a=>{const e=O("");return new Promise(n=>{X.confirm({title:K("inputFolderName"),content:()=>f(ke,{value:e.value,"onUpdate:value":r=>e.value=r},null),async onOk(){if(!e.value)return;const r=Ce(a,e.value);await Ee(r),n()}})})},Ye=()=>f("p",{style:{background:"var(--zp-secondary-background)",padding:"8px",borderLeft:"4px solid var(--primary-color)"}},[we("Tips: "),K("multiSelectTips")]),Ze=a=>{X.confirm({width:"80vw",title:a.name,icon:null,content:()=>f("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},[f("video",{style:{maxHeight:me?"80vh":"60vh"},src:Y(a),controls:!0,autoplay:!0},null),f("div",{class:"actions",style:{marginTop:"16px"}},[f(be,{onClick:()=>ge([Y(a,!0)])},{icon:f($e,null,null),default:K("download")})])]),maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},Je=()=>{X.confirm({title:K("confirmRebuildImageIndex"),onOk:async()=>{await Se(),ye.emit("searchIndexExpired"),xe.success(K("rebuildComplete"))}})};export{N as C,Ye as M,He as a,Le as b,Qe as c,ze as d,Ze as e,Xe as g,qe as l,We as m,Je as o,Ue as t};
