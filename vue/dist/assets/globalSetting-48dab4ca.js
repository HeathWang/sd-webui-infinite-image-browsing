import{av as ye,d as R,aw as _e,Z as A,l as q,_ as te,a as x,$ as le,h as B,c as u,P as y,j as ie,u as re,ax as xe,ay as we,az as Se,aA as be,w as oe,f as $e,ao as H,aB as Ie,i as Be,X as Ve,Y as Me,aC as Pe,aD as Ae,aE as Fe,aF as Ke,g as de,aG as Te,aH as ce,k as ge,aI as Ge,o as O,y as z,n as C,r as l,ah as G,m as J,C as Y,p as P,z as Z,v as K,x as D,S as se,aJ as Oe,I as Ne,A as fe,q as ae,E as Ue,aK as De,aL as Ee,aM as Re,aN as je,U as ve,T as We,W as ze}from"./index-5f58fa79.js";import{N as he,_ as pe,F as He}from"./numInput-1258aa0e.js";/* empty css              *//* empty css              *//* empty css              */import{o as qe,g as Le}from"./functionalCallableComp-9a9cbacb.js";import"./db-5a33988f.js";function Xe(g,e){var a=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!a){if(Array.isArray(g)||(a=ye(g))||e&&g&&typeof g.length=="number"){a&&(g=a);var f=0,k=function(){};return{s:k,n:function(){return f>=g.length?{done:!0}:{done:!1,value:g[f++]}},e:function(h){throw h},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,v=!1,o;return{s:function(){a=a.call(g)},n:function(){var h=a.next();return p=h.done,h},e:function(h){v=!0,o=h},f:function(){try{!p&&a.return!=null&&a.return()}finally{if(v)throw o}}}}var Je=["prefixCls","name","id","type","disabled","readonly","tabindex","autofocus","value","required"],Ye={prefixCls:String,name:String,id:String,type:String,defaultChecked:{type:[Boolean,Number],default:void 0},checked:{type:[Boolean,Number],default:void 0},disabled:Boolean,tabindex:{type:[Number,String]},readonly:Boolean,autofocus:Boolean,value:y.any,required:Boolean};const Ze=R({compatConfig:{MODE:3},name:"Checkbox",inheritAttrs:!1,props:_e(Ye,{prefixCls:"rc-checkbox",type:"checkbox",defaultChecked:!1}),emits:["click","change"],setup:function(e,a){var f=a.attrs,k=a.emit,p=a.expose,v=A(e.checked===void 0?e.defaultChecked:e.checked),o=A();q(function(){return e.checked},function(){v.value=e.checked}),p({focus:function(){var r;(r=o.value)===null||r===void 0||r.focus()},blur:function(){var r;(r=o.value)===null||r===void 0||r.blur()}});var n=A(),h=function(r){if(!e.disabled){e.checked===void 0&&(v.value=r.target.checked),r.shiftKey=n.value;var V={target:x(x({},e),{},{checked:r.target.checked}),stopPropagation:function(){r.stopPropagation()},preventDefault:function(){r.preventDefault()},nativeEvent:r};e.checked!==void 0&&(o.value.checked=!!e.checked),k("change",V),n.value=!1}},m=function(r){k("click",r),n.value=r.shiftKey};return function(){var i,r=e.prefixCls,V=e.name,_=e.id,T=e.type,M=e.disabled,c=e.readonly,t=e.tabindex,b=e.autofocus,w=e.value,S=e.required,$=te(e,Je),d=f.class,s=f.onFocus,I=f.onBlur,j=f.onKeydown,U=f.onKeypress,Q=f.onKeyup,L=x(x({},$),f),F=Object.keys(L).reduce(function(W,N){return(N.substr(0,5)==="aria-"||N.substr(0,5)==="data-"||N==="role")&&(W[N]=L[N]),W},{}),ee=le(r,d,(i={},B(i,"".concat(r,"-checked"),v.value),B(i,"".concat(r,"-disabled"),M),i)),ne=x(x({name:V,id:_,type:T,readonly:c,disabled:M,tabindex:t,class:"".concat(r,"-input"),checked:!!v.value,autofocus:b,value:w},F),{},{onChange:h,onClick:m,onFocus:s,onBlur:I,onKeydown:j,onKeypress:U,onKeyup:Q,required:S});return u("span",{class:ee},[u("input",x({ref:o},ne),null),u("span",{class:"".concat(r,"-inner")},null)])}}});var Qe=function(){return{name:String,prefixCls:String,options:{type:Array,default:function(){return[]}},disabled:Boolean,id:String}},en=function(){return x(x({},Qe()),{},{defaultValue:{type:Array},value:{type:Array},onChange:{type:Function},"onUpdate:value":{type:Function}})},nn=function(){return{prefixCls:String,defaultChecked:{type:Boolean,default:void 0},checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:y.any,name:String,id:String,indeterminate:{type:Boolean,default:void 0},type:{type:String,default:"checkbox"},autofocus:{type:Boolean,default:void 0},onChange:Function,"onUpdate:checked":Function,onClick:Function,skipGroup:{type:Boolean,default:!1}}},an=function(){return x(x({},nn()),{},{indeterminate:{type:Boolean,default:!1}})},ke=Symbol("CheckboxGroupContext"),tn=["indeterminate","skipGroup","id"],ln=["onMouseenter","onMouseleave","onInput","class","style"];const E=R({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:an(),setup:function(e,a){var f=a.emit,k=a.attrs,p=a.slots,v=a.expose,o=ie(),n=re("checkbox",e),h=n.prefixCls,m=n.direction,i=xe(ke,void 0),r=Symbol("checkboxUniId");we(function(){!e.skipGroup&&i&&i.registerValue(r,e.value)}),Se(function(){i&&i.cancelValue(r)}),be(function(){oe(e.checked!==void 0||i||e.value===void 0,"Checkbox","`value` is not validate prop, do you mean `checked`?")});var V=function(t){var b=t.target.checked;f("update:checked",b),f("change",t)},_=A(),T=function(){var t;(t=_.value)===null||t===void 0||t.focus()},M=function(){var t;(t=_.value)===null||t===void 0||t.blur()};return v({focus:T,blur:M}),function(){var c,t,b=$e((c=p.default)===null||c===void 0?void 0:c.call(p)),w=e.indeterminate,S=e.skipGroup,$=e.id,d=$===void 0?o.id.value:$,s=te(e,tn),I=k.onMouseenter,j=k.onMouseleave;k.onInput;var U=k.class,Q=k.style,L=te(k,ln),F=x(x({},s),{},{id:d,prefixCls:h.value},L);i&&!S?(F.onChange=function(){for(var W=arguments.length,N=new Array(W),X=0;X<W;X++)N[X]=arguments[X];f.apply(void 0,["change"].concat(N)),i.toggleOption({label:b,value:e.value})},F.name=i.name.value,F.checked=i.mergedValue.value.indexOf(e.value)!==-1,F.disabled=e.disabled||i.disabled.value,F.indeterminate=w):F.onChange=V;var ee=le((t={},B(t,"".concat(h.value,"-wrapper"),!0),B(t,"".concat(h.value,"-rtl"),m.value==="rtl"),B(t,"".concat(h.value,"-wrapper-checked"),F.checked),B(t,"".concat(h.value,"-wrapper-disabled"),F.disabled),t),U),ne=le(B({},"".concat(h.value,"-indeterminate"),w));return u("label",{class:ee,style:Q,onMouseenter:I,onMouseleave:j},[u(Ze,x(x({},F),{},{class:ne,ref:_}),null),b.length?u("span",null,[b]):null])}}}),ue=R({compatConfig:{MODE:3},name:"ACheckboxGroup",props:en(),setup:function(e,a){var f=a.slots,k=a.emit,p=a.expose,v=ie(),o=re("checkbox",e),n=o.prefixCls,h=o.direction,m=A((e.value===void 0?e.defaultValue:e.value)||[]);q(function(){return e.value},function(){m.value=e.value||[]});var i=H(function(){return e.options.map(function(t){return typeof t=="string"||typeof t=="number"?{label:t,value:t}:t})}),r=A(Symbol()),V=A(new Map),_=function(b){V.value.delete(b),r.value=Symbol()},T=function(b,w){V.value.set(b,w),r.value=Symbol()},M=A(new Map);q(r,function(){var t=new Map,b=Xe(V.value.values()),w;try{for(b.s();!(w=b.n()).done;){var S=w.value;t.set(S,!0)}}catch($){b.e($)}finally{b.f()}M.value=t});var c=function(b){var w=m.value.indexOf(b.value),S=Be(m.value);w===-1?S.push(b.value):S.splice(w,1),e.value===void 0&&(m.value=S);var $=S.filter(function(d){return M.value.has(d)}).sort(function(d,s){var I=i.value.findIndex(function(U){return U.value===d}),j=i.value.findIndex(function(U){return U.value===s});return I-j});k("update:value",$),k("change",$),v.onFieldChange()};return Ie(ke,{cancelValue:_,registerValue:T,toggleOption:c,mergedValue:m,name:H(function(){return e.name}),disabled:H(function(){return e.disabled})}),p({mergedValue:m}),function(){var t,b=e.id,w=b===void 0?v.id.value:b,S=null,$="".concat(n.value,"-group");return i.value&&i.value.length>0&&(S=i.value.map(function(d){var s;return u(E,{prefixCls:n.value,key:d.value.toString(),disabled:"disabled"in d?d.disabled:e.disabled,indeterminate:d.indeterminate,value:d.value,checked:m.value.indexOf(d.value)!==-1,onChange:d.onChange,class:"".concat($,"-item")},{default:function(){return[d.label===void 0?(s=f.label)===null||s===void 0?void 0:s.call(f,d):d.label]}})})),u("div",{class:[$,B({},"".concat($,"-rtl"),h.value==="rtl")],id:w},[S||((t=f.default)===null||t===void 0?void 0:t.call(f))])}}});E.Group=ue;E.install=function(g){return g.component(E.name,E),g.component(ue.name,ue),g};var on=Me("small","default"),un=function(){return{id:String,prefixCls:String,size:y.oneOf(on),disabled:{type:Boolean,default:void 0},checkedChildren:y.any,unCheckedChildren:y.any,tabindex:y.oneOfType([y.string,y.number]),autofocus:{type:Boolean,default:void 0},loading:{type:Boolean,default:void 0},checked:y.oneOfType([y.string,y.number,y.looseBool]),checkedValue:y.oneOfType([y.string,y.number,y.looseBool]).def(!0),unCheckedValue:y.oneOfType([y.string,y.number,y.looseBool]).def(!1),onChange:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onMouseup:{type:Function},"onUpdate:checked":{type:Function},onBlur:Function,onFocus:Function}},rn=R({compatConfig:{MODE:3},name:"ASwitch",__ANT_SWITCH:!0,inheritAttrs:!1,props:un(),slots:["checkedChildren","unCheckedChildren"],setup:function(e,a){var f=a.attrs,k=a.slots,p=a.expose,v=a.emit,o=ie();Pe(function(){oe(!("defaultChecked"in f),"Switch","'defaultChecked' is deprecated, please use 'v-model:checked'"),oe(!("value"in f),"Switch","`value` is not validate prop, do you mean `checked`?")});var n=A(e.checked!==void 0?e.checked:f.defaultChecked),h=H(function(){return n.value===e.checkedValue});q(function(){return e.checked},function(){n.value=e.checked});var m=re("switch",e),i=m.prefixCls,r=m.direction,V=m.size,_=A(),T=function(){var s;(s=_.value)===null||s===void 0||s.focus()},M=function(){var s;(s=_.value)===null||s===void 0||s.blur()};p({focus:T,blur:M}),be(function(){Ae(function(){e.autofocus&&!e.disabled&&_.value.focus()})});var c=function(s,I){e.disabled||(v("update:checked",s),v("change",s,I),o.onFieldChange())},t=function(s){v("blur",s)},b=function(s){T();var I=h.value?e.unCheckedValue:e.checkedValue;c(I,s),v("click",I,s)},w=function(s){s.keyCode===ce.LEFT?c(e.unCheckedValue,s):s.keyCode===ce.RIGHT&&c(e.checkedValue,s),v("keydown",s)},S=function(s){var I;(I=_.value)===null||I===void 0||I.blur(),v("mouseup",s)},$=H(function(){var d;return d={},B(d,"".concat(i.value,"-small"),V.value==="small"),B(d,"".concat(i.value,"-loading"),e.loading),B(d,"".concat(i.value,"-checked"),h.value),B(d,"".concat(i.value,"-disabled"),e.disabled),B(d,i.value,!0),B(d,"".concat(i.value,"-rtl"),r.value==="rtl"),d});return function(){var d;return u(Te,{insertExtraNode:!0},{default:function(){return[u("button",x(x(x({},Fe(e,["prefixCls","checkedChildren","unCheckedChildren","checked","autofocus","checkedValue","unCheckedValue","id","onChange","onUpdate:checked"])),f),{},{id:(d=e.id)!==null&&d!==void 0?d:o.id.value,onKeydown:w,onClick:b,onBlur:t,onMouseup:S,type:"button",role:"switch","aria-checked":n.value,disabled:e.disabled||e.loading,class:[f.class,$.value],ref:_}),[u("div",{class:"".concat(i.value,"-handle")},[e.loading?u(Ke,{class:"".concat(i.value,"-loading-icon")},null):null]),u("span",{class:"".concat(i.value,"-inner")},[h.value?de(k,e,"checkedChildren"):de(k,e,"unCheckedChildren")])])]}})}}});const Ce=Ve(rn);const me="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",dn=["width","height","src"],cn=R({__name:"ImageSetting",setup(g){function e(k,p){return new Promise(v=>{const o=new Image;o.onload=()=>{const n=document.createElement("canvas");n.width=o.width*p,n.height=o.height*p,n.getContext("2d").drawImage(o,0,0,n.width,n.height),v(n.toDataURL())},o.src=k})}const a=ge(),f=A("");return q(()=>[a.enableThumbnail,a.gridThumbnailResolution],Ge(async()=>{a.enableThumbnail&&(f.value=await e(me,a.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(k,p)=>{const v=pe,o=Ce;return O(),z(Z,null,[u(v,{label:l(G)("defaultGridCellWidth")},{default:C(()=>[u(he,{min:64,max:1024,step:32,modelValue:l(a).defaultGridCellWidth,"onUpdate:modelValue":p[0]||(p[0]=n=>l(a).defaultGridCellWidth=n)},null,8,["modelValue"])]),_:1},8,["label"]),u(v,{label:l(G)("useThumbnailPreview")},{default:C(()=>[u(o,{checked:l(a).enableThumbnail,"onUpdate:checked":p[1]||(p[1]=n=>l(a).enableThumbnail=n)},null,8,["checked"])]),_:1},8,["label"]),l(a).enableThumbnail?(O(),J(v,{key:0,label:l(G)("thumbnailResolution")},{default:C(()=>[u(he,{modelValue:l(a).gridThumbnailResolution,"onUpdate:modelValue":p[2]||(p[2]=n=>l(a).gridThumbnailResolution=n),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):Y("",!0),u(v,{label:l(G)("livePreview")},{default:C(()=>[P("div",null,[P("img",{width:l(a).defaultGridCellWidth,height:l(a).defaultGridCellWidth,src:l(a).enableThumbnail?f.value:l(me)},null,8,dn)])]),_:1},8,["label"])],64)}}}),sn={class:"panel"},fn={style:{"margin-top":"0"}},vn={class:"lang-select-wrap"},hn={class:"col"},mn={class:"col"},bn={class:"col"},gn={class:"col"},pn=R({__name:"globalSetting",setup(g){const e=ge(),a=A(!1),f=async()=>{window.location.reload()},k=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],p=(o,n)=>{const h=Le(o);h&&(e.shortcut[n]=h)},v=async()=>{await De("shutdown_api_server_command"),await Ee.removeFile(Re),await je()};return(o,n)=>{const h=ve,m=pe,i=Ce,r=ve,V=E,_=We,T=He;return O(),z("div",sn,[Y("",!0),u(T,null,{default:C(()=>{var M;return[P("h2",fn,K(l(G)("ImageBrowsingSettings")),1),u(cn),P("h2",null,K(l(G)("imgSearch")),1),u(m,{label:o.$t("rebuildImageIndex")},{default:C(()=>[u(h,{onClick:l(qe)},{default:C(()=>[D(K(o.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),P("h2",null,K(l(G)("other")),1),u(m,{label:o.$t("onlyFoldersAndImages")},{default:C(()=>[u(i,{checked:l(e).onlyFoldersAndImages,"onUpdate:checked":n[0]||(n[0]=c=>l(e).onlyFoldersAndImages=c)},null,8,["checked"])]),_:1},8,["label"]),u(m,{label:o.$t("defaultSortingMethod")},{default:C(()=>[u(l(se),{value:l(e).defaultSortingMethod,"onUpdate:value":n[1]||(n[1]=c=>l(e).defaultSortingMethod=c),conv:l(Oe),options:l(Ne)},null,8,["value","conv","options"])]),_:1},8,["label"]),u(m,{label:o.$t("longPressOpenContextMenu")},{default:C(()=>[u(i,{checked:l(e).longPressOpenContextMenu,"onUpdate:checked":n[2]||(n[2]=c=>l(e).longPressOpenContextMenu=c)},null,8,["checked"])]),_:1},8,["label"]),u(m,{label:o.$t("lang")},{default:C(()=>[P("div",vn,[u(l(se),{options:k,value:l(e).lang,"onUpdate:value":n[3]||(n[3]=c=>l(e).lang=c),onChange:n[4]||(n[4]=c=>a.value=!0)},null,8,["value"])]),a.value?(O(),J(r,{key:0,type:"primary",onClick:f,ghost:""},{default:C(()=>[D(K(l(G)("langChangeReload")),1)]),_:1})):Y("",!0)]),_:1},8,["label"]),(O(!0),z(Z,null,fe(l(e).ignoredConfirmActions,(c,t)=>(O(),J(m,{label:o.$t(t+"SkipConfirm"),key:t},{default:C(()=>[u(V,{checked:l(e).ignoredConfirmActions[t],"onUpdate:checked":b=>l(e).ignoredConfirmActions[t]=b},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),P("h2",null,K(l(G)("shortcutKey")),1),u(m,{label:o.$t("download")},{default:C(()=>[P("div",hn,[u(_,{value:l(e).shortcut.download,onKeydown:n[5]||(n[5]=ae(c=>p(c,"download"),["stop","prevent"])),placeholder:o.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),u(r,{onClick:n[6]||(n[6]=c=>l(e).shortcut.download=""),class:"clear-btn"},{default:C(()=>[D(K(o.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),u(m,{label:o.$t("deleteSelected")},{default:C(()=>[P("div",mn,[u(_,{value:l(e).shortcut.delete,onKeydown:n[7]||(n[7]=ae(c=>p(c,"delete"),["stop","prevent"])),placeholder:o.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),u(r,{onClick:n[8]||(n[8]=c=>l(e).shortcut.delete=""),class:"clear-btn"},{default:C(()=>[D(K(o.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(O(!0),z(Z,null,fe(((M=l(e).conf)==null?void 0:M.all_custom_tags)??[],c=>(O(),J(m,{label:o.$t("toggleTagSelection",{tag:c.name}),key:c.id},{default:C(()=>[P("div",bn,[u(_,{value:l(e).shortcut[`toggle_tag_${c.name}`],onKeydown:ae(t=>p(t,`toggle_tag_${c.name}`),["stop","prevent"]),placeholder:o.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),u(r,{onClick:t=>l(e).shortcut[`toggle_tag_${c.name}`]="",class:"clear-btn"},{default:C(()=>[D(K(o.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),l(Ue)?(O(),z(Z,{key:0},[P("h2",null,K(l(G)("clientSpecificSettings")),1),u(m,null,{default:C(()=>[P("div",gn,[u(r,{onClick:v,class:"clear-btn"},{default:C(()=>[D(K(o.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):Y("",!0)]}),_:1})])}}});const $n=ze(pn,[["__scopeId","data-v-273b24fb"]]);export{$n as default};
