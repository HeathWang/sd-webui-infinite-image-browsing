import{P as Ie,c3 as qt,a as Y,d as ce,bq as Ct,u as xe,c as A,bZ as It,_ as Gt,V as se,a0 as ve,aj as j,bL as it,a3 as at,bo as Yt,h as X,c4 as Zt,b as Xt,ay as en,c5 as tn,a2 as rt,bK as nn,c6 as an,c7 as rn,$ as Q,b0 as sn,z as Z,aA as ln,a1 as on,ag as he,c8 as cn,aR as un,c9 as dn,ca as fn,aM as Et,am as De,bn as _t,cb as vn,cc as pn,c2 as me,cd as hn,ce as mn,R as re,ai as F,U as gn,cf as Te,x as R,cg as Pt,ch as st,ci as yn,k as We,ah as bn,cj as Ot,ar as q,ck as Ke,l as Ee,aC as _e,aw as wn,ap as Ne,cl as An,cm as lt,an as xt,bQ as ot,bP as Sn,cn as Ae,co as kn,aD as Cn,bO as Tt,cp as In,cq as En,cr as U,cs as de,t as Le,as as ct,ct as ut,c1 as _n,L as te,J as Pn,bX as dt,al as ge,cu as On,bW as xn,cv as Tn,cw as Bn,cx as Nn,at as Mn,au as zn,ax as Bt,o as z,m as J,cy as $n,cz as Fn,cA as Qn,cB as Dn,cC as Ln,a5 as Rn,y as V,cD as ye,E as G,n as M,A as qe,cE as ft,bG as jn,cF as Vn,B as Hn,N as Pe,v as L,r as K,W as Un,cG as Jn,b_ as Wn,M as Kn,cH as qn,cI as Gn,p as ae,ae as Yn,cJ as Zn,X as Xn}from"./index-24041d00.js";import{f as ei,h as ti,a as ni,t as ii}from"./db-df8b57f9.js";import{t as Me,l as le,g as ai}from"./shortcut-f1370d0c.js";var Nt=function(){return{arrow:{type:[Boolean,Object],default:void 0},trigger:{type:[Array,String]},overlay:Ie.any,visible:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},align:{type:Object},getPopupContainer:Function,prefixCls:String,transitionName:String,placement:String,overlayClassName:String,overlayStyle:{type:Object,default:void 0},forceRender:{type:Boolean,default:void 0},mouseEnterDelay:Number,mouseLeaveDelay:Number,openClassName:String,minOverlayWidthMatchTrigger:{type:Boolean,default:void 0},destroyPopupOnHide:{type:Boolean,default:void 0},onVisibleChange:{type:Function},"onUpdate:visible":{type:Function}}},ze=qt(),ri=function(){return Y(Y({},Nt()),{},{type:ze.type,size:String,htmlType:ze.htmlType,href:String,disabled:{type:Boolean,default:void 0},prefixCls:String,icon:Ie.any,title:String,loading:ze.loading,onClick:{type:Function}})},si=["type","disabled","loading","htmlType","class","overlay","trigger","align","visible","onVisibleChange","placement","href","title","icon","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","onClick","onUpdate:visible"],li=se.Group;const Oe=ce({compatConfig:{MODE:3},name:"ADropdownButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:Ct(ri(),{trigger:"hover",placement:"bottomRight",type:"default"}),slots:["icon","leftButton","rightButton","overlay"],setup:function(n,t){var i=t.slots,a=t.attrs,r=t.emit,p=function(g){r("update:visible",g),r("visibleChange",g)},o=xe("dropdown-button",n),f=o.prefixCls,m=o.direction,b=o.getPopupContainer;return function(){var I,g,v=Y(Y({},n),a),s=v.type,l=s===void 0?"default":s,c=v.disabled,S=v.loading,h=v.htmlType,y=v.class,u=y===void 0?"":y,C=v.overlay,O=C===void 0?(I=i.overlay)===null||I===void 0?void 0:I.call(i):C,P=v.trigger,E=v.align,T=v.visible;v.onVisibleChange;var _=v.placement,B=_===void 0?m.value==="rtl"?"bottomLeft":"bottomRight":_,w=v.href,d=v.title,k=v.icon,x=k===void 0?((g=i.icon)===null||g===void 0?void 0:g.call(i))||A(It,null,null):k,$=v.mouseEnterDelay,D=v.mouseLeaveDelay,W=v.overlayClassName,H=v.overlayStyle,ne=v.destroyPopupOnHide,ie=v.onClick;v["onUpdate:visible"];var Jt=Gt(v,si),Wt={align:E,disabled:c,trigger:c?[]:P,placement:B,getPopupContainer:b.value,onVisibleChange:p,mouseEnterDelay:$,mouseLeaveDelay:D,visible:T,overlayClassName:W,overlayStyle:H,destroyPopupOnHide:ne},tt=A(se,{type:l,disabled:c,loading:S,onClick:ie,htmlType:h,href:w,title:d},{default:i.default}),nt=A(se,{type:l,icon:x},null);return A(li,Y(Y({},Jt),{},{class:ve(f.value,u)}),{default:function(){return[i.leftButton?i.leftButton({button:tt}):tt,A(oe,Wt,{default:function(){return[i.rightButton?i.rightButton({button:nt}):nt]},overlay:function(){return O}})]}})}}});var Mt=ce({compatConfig:{MODE:3},name:"ADropdown",inheritAttrs:!1,props:Ct(Nt(),{mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft",trigger:"hover"}),slots:["overlay"],setup:function(n,t){var i=t.slots,a=t.attrs,r=t.emit,p=xe("dropdown",n),o=p.prefixCls,f=p.rootPrefixCls,m=p.direction,b=p.getPopupContainer,I=j(function(){var l=n.placement,c=l===void 0?"":l,S=n.transitionName;return S!==void 0?S:c.indexOf("top")>=0?"".concat(f.value,"-slide-down"):"".concat(f.value,"-slide-up")}),g=function(){var c,S,h,y=n.overlay||((c=i.overlay)===null||c===void 0?void 0:c.call(i)),u=Array.isArray(y)?y[0]:y;if(!u)return null;var C=u.props||{};it(!C.mode||C.mode==="vertical","Dropdown",'mode="'.concat(C.mode,`" is not supported for Dropdown's Menu.`));var O=C.selectable,P=O===void 0?!1:O,E=C.expandIcon,T=E===void 0?(S=u.children)===null||S===void 0||(h=S.expandIcon)===null||h===void 0?void 0:h.call(S):E,_=typeof T<"u"&&rt(T)?T:A("span",{class:"".concat(o.value,"-menu-submenu-arrow")},[A(nn,{class:"".concat(o.value,"-menu-submenu-arrow-icon")},null)]),B=rt(u)?at(u,{mode:"vertical",selectable:P,expandIcon:function(){return _}}):u;return B},v=j(function(){var l=n.placement;if(!l)return m.value==="rtl"?"bottomRight":"bottomLeft";if(l.includes("Center")){var c=l.slice(0,l.indexOf("Center"));return it(!l.includes("Center"),"Dropdown","You are using '".concat(l,"' placement in Dropdown, which is deprecated. Try to use '").concat(c,"' instead.")),c}return l}),s=function(c){r("update:visible",c),r("visibleChange",c)};return function(){var l,c,S=n.arrow,h=n.trigger,y=n.disabled,u=n.overlayClassName,C=(l=i.default)===null||l===void 0?void 0:l.call(i)[0],O=at(C,Yt({class:ve(C==null||(c=C.props)===null||c===void 0?void 0:c.class,X({},"".concat(o.value,"-rtl"),m.value==="rtl"),"".concat(o.value,"-trigger"))},y?{disabled:y}:{})),P=ve(u,X({},"".concat(o.value,"-rtl"),m.value==="rtl")),E=y?[]:h,T;E&&E.indexOf("contextmenu")!==-1&&(T=!0);var _=Zt({arrowPointAtCenter:Xt(S)==="object"&&S.pointAtCenter,autoAdjustOverflow:!0}),B=en(Y(Y(Y({},n),a),{},{builtinPlacements:_,overlayClassName:P,arrow:S,alignPoint:T,prefixCls:o.value,getPopupContainer:b.value,transitionName:I.value,trigger:E,onVisibleChange:s,placement:v.value}),["overlay","onUpdate:visible"]);return A(tn,B,{default:function(){return[O]},overlay:g})}}});Mt.Button=Oe;const oe=Mt;var oi=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}},ci=ce({compatConfig:{MODE:3},name:"ACheckableTag",props:oi(),setup:function(n,t){var i=t.slots,a=t.emit,r=xe("tag",n),p=r.prefixCls,o=function(b){var I=n.checked;a("update:checked",!I),a("change",!I),a("click",b)},f=j(function(){var m;return ve(p.value,(m={},X(m,"".concat(p.value,"-checkable"),!0),X(m,"".concat(p.value,"-checkable-checked"),n.checked),m))});return function(){var m;return A("span",{class:f.value,onClick:o},[(m=i.default)===null||m===void 0?void 0:m.call(i)])}}});const Re=ci;var ui=new RegExp("^(".concat(an.join("|"),")(-inverse)?$")),di=new RegExp("^(".concat(rn.join("|"),")$")),fi=function(){return{prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:Ie.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},"onUpdate:visible":Function,icon:Ie.any}},fe=ce({compatConfig:{MODE:3},name:"ATag",props:fi(),slots:["closeIcon","icon"],setup:function(n,t){var i=t.slots,a=t.emit,r=t.attrs,p=xe("tag",n),o=p.prefixCls,f=p.direction,m=Q(!0);sn(function(){n.visible!==void 0&&(m.value=n.visible)});var b=function(s){s.stopPropagation(),a("update:visible",!1),a("close",s),!s.defaultPrevented&&n.visible===void 0&&(m.value=!1)},I=j(function(){var v=n.color;return v?ui.test(v)||di.test(v):!1}),g=j(function(){var v;return ve(o.value,(v={},X(v,"".concat(o.value,"-").concat(n.color),I.value),X(v,"".concat(o.value,"-has-color"),n.color&&!I.value),X(v,"".concat(o.value,"-hidden"),!m.value),X(v,"".concat(o.value,"-rtl"),f.value==="rtl"),v))});return function(){var v,s,l,c=n.icon,S=c===void 0?(v=i.icon)===null||v===void 0?void 0:v.call(i):c,h=n.color,y=n.closeIcon,u=y===void 0?(s=i.closeIcon)===null||s===void 0?void 0:s.call(i):y,C=n.closable,O=C===void 0?!1:C,P=function(){return O?u?A("span",{class:"".concat(o.value,"-close-icon"),onClick:b},[u]):A(on,{class:"".concat(o.value,"-close-icon"),onClick:b},null):null},E={backgroundColor:h&&!I.value?h:void 0},T=S||null,_=(l=i.default)===null||l===void 0?void 0:l.call(i),B=T?A(Z,null,[T,A("span",null,[_])]):_,w="onClick"in r,d=A("span",{class:g.value,style:E},[B,P()]);return w?A(ln,null,{default:function(){return[d]}}):d}}});fe.CheckableTag=Re;fe.install=function(e){return e.component(fe.name,fe),e.component(Re.name,Re),e};const vi=fe;oe.Button=Oe;oe.install=function(e){return e.component(oe.name,oe),e.component(Oe.name,Oe),e};var pi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const hi=pi;function vt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){mi(e,a,t[a])})}return e}function mi(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ge=function(n,t){var i=vt({},n,t.attrs);return A(he,vt({},i,{icon:hi}),null)};Ge.displayName="StarFilled";Ge.inheritAttrs=!1;const gi=Ge;var yi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const bi=yi;function pt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){wi(e,a,t[a])})}return e}function wi(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ye=function(n,t){var i=pt({},n,t.attrs);return A(he,pt({},i,{icon:bi}),null)};Ye.displayName="FileOutlined";Ye.inheritAttrs=!1;const Ai=Ye;var Si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const ki=Si;function ht(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){Ci(e,a,t[a])})}return e}function Ci(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ze=function(n,t){var i=ht({},n,t.attrs);return A(he,ht({},i,{icon:ki}),null)};Ze.displayName="FolderOpenOutlined";Ze.inheritAttrs=!1;const Ii=Ze;function Ei(e,n,t){if(!cn(t))return!1;var i=typeof n;return(i=="number"?un(t)&&dn(n,t.length):i=="string"&&n in t)?fn(t[n],e):!1}var _i=Math.ceil,Pi=Math.max;function Oi(e,n,t,i){for(var a=-1,r=Pi(_i((n-e)/(t||1)),0),p=Array(r);r--;)p[i?r:++a]=e,e+=t;return p}function xi(e){return function(n,t,i){return i&&typeof i!="number"&&Ei(n,t,i)&&(t=i=void 0),n=Me(n),t===void 0?(t=n,n=0):t=Me(t),i=i===void 0?n<t?1:-1:Me(i),Oi(n,t,i,e)}}var Ti=xi();const zt=Ti,pe=(...e)=>{document.addEventListener(...e),Et(()=>document.removeEventListener(...e))},Bi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==",be=new WeakMap;function Ni(e,n){return{useHookShareState:i=>{const a=pn();De(a),be.has(a)||(be.set(a,_t(e(a,i??(n==null?void 0:n())))),Et(()=>{be.delete(a)}));const r=be.get(a);return De(r),{state:r,toRefs(){return vn(r)}}}}}var Mi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const zi=Mi;function mt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){$i(e,a,t[a])})}return e}function $i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Xe=function(n,t){var i=mt({},n,t.attrs);return A(he,mt({},i,{icon:zi}),null)};Xe.displayName="DatabaseOutlined";Xe.inheritAttrs=!1;const Fi=Xe;var Qi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Di=Qi;function gt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){Li(e,a,t[a])})}return e}function Li(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var et=function(n,t){var i=gt({},n,t.attrs);return A(he,gt({},i,{icon:Di}),null)};et.displayName="StarOutlined";et.inheritAttrs=!1;const Ri=et;const ue=async e=>(await me.value.get("/files",{params:{folder_path:e}})).data,ji=async e=>(await me.value.post("/delete_files",{file_paths:e})).data,$t=async(e,n,t)=>(await me.value.post("/move_files",{file_paths:e,dest:n,create_dest_folder:t})).data,Vi=async(e,n,t)=>(await me.value.post("/copy_files",{file_paths:e,dest:n,create_dest_folder:t})).data,Hi=async e=>{await me.value.post("/mkdirs",{dest_folder:e})};var Ft={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(e,n){(function(t,i){e.exports=i})(hn,function(){var t={};t.version="0.3.5";var i=t.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};t.configure=function(s){var l,c;for(l in s)c=s[l],c!==void 0&&s.hasOwnProperty(l)&&(i[l]=c);return this},t.status=null,t.set=function(s){var l=t.isStarted();s=a(s,i.minimum,1),t.status=s===1?null:s;var c=t.render(!l),S=c.querySelector(i.barSelector),h=i.speed,y=i.easing;return c.offsetWidth,o(function(u){i.positionUsing===""&&(i.positionUsing=t.getPositioningCSS()),f(S,p(s,h,y)),s===1?(f(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout(function(){f(c,{transition:"all "+h+"ms linear",opacity:0}),setTimeout(function(){t.remove(),u()},h)},h)):setTimeout(u,h)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var s=function(){setTimeout(function(){t.status&&(t.trickle(),s())},i.trickleSpeed)};return i.trickle&&s(),this},t.done=function(s){return!s&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(s){var l=t.status;return l?l>1?void 0:(typeof s!="number"&&(l>=0&&l<.2?s=.1:l>=.2&&l<.5?s=.04:l>=.5&&l<.8?s=.02:l>=.8&&l<.99?s=.005:s=0),l=a(l+s,0,.994),t.set(l)):t.start()},t.trickle=function(){return t.inc()},function(){var s=0,l=0;t.promise=function(c){return!c||c.state()==="resolved"?this:(l===0&&t.start(),s++,l++,c.always(function(){l--,l===0?(s=0,t.done()):t.set((s-l)/s)}),this)}}(),t.getElement=function(){var s=t.getParent();if(s){var l=Array.prototype.slice.call(s.querySelectorAll(".nprogress")).filter(function(c){return c.parentElement===s});if(l.length>0)return l[0]}return null},t.getParent=function(){if(i.parent instanceof HTMLElement)return i.parent;if(typeof i.parent=="string")return document.querySelector(i.parent)},t.render=function(s){if(t.isRendered())return t.getElement();b(document.documentElement,"nprogress-busy");var l=document.createElement("div");l.id="nprogress",l.className="nprogress",l.innerHTML=i.template;var c=l.querySelector(i.barSelector),S=s?"-100":r(t.status||0),h=t.getParent(),y;return f(c,{transition:"all 0 linear",transform:"translate3d("+S+"%,0,0)"}),i.showSpinner||(y=l.querySelector(i.spinnerSelector),y&&v(y)),h!=document.body&&b(h,"nprogress-custom-parent"),h.appendChild(l),l},t.remove=function(){t.status=null,I(document.documentElement,"nprogress-busy"),I(t.getParent(),"nprogress-custom-parent");var s=t.getElement();s&&v(s)},t.isRendered=function(){return!!t.getElement()},t.getPositioningCSS=function(){var s=document.body.style,l="WebkitTransform"in s?"Webkit":"MozTransform"in s?"Moz":"msTransform"in s?"ms":"OTransform"in s?"O":"";return l+"Perspective"in s?"translate3d":l+"Transform"in s?"translate":"margin"};function a(s,l,c){return s<l?l:s>c?c:s}function r(s){return(-1+s)*100}function p(s,l,c){var S;return i.positionUsing==="translate3d"?S={transform:"translate3d("+r(s)+"%,0,0)"}:i.positionUsing==="translate"?S={transform:"translate("+r(s)+"%,0)"}:S={"margin-left":r(s)+"%"},S.transition="all "+l+"ms "+c,S}var o=function(){var s=[];function l(){var c=s.shift();c&&c(l)}return function(c){s.push(c),s.length==1&&l()}}(),f=function(){var s=["Webkit","O","Moz","ms"],l={};function c(u){return u.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(C,O){return O.toUpperCase()})}function S(u){var C=document.body.style;if(u in C)return u;for(var O=s.length,P=u.charAt(0).toUpperCase()+u.slice(1),E;O--;)if(E=s[O]+P,E in C)return E;return u}function h(u){return u=c(u),l[u]||(l[u]=S(u))}function y(u,C,O){C=h(C),u.style[C]=O}return function(u,C){var O=arguments,P,E;if(O.length==2)for(P in C)E=C[P],E!==void 0&&C.hasOwnProperty(P)&&y(u,P,E);else y(u,O[1],O[2])}}();function m(s,l){var c=typeof s=="string"?s:g(s);return c.indexOf(" "+l+" ")>=0}function b(s,l){var c=g(s),S=c+l;m(c,l)||(s.className=S.substring(1))}function I(s,l){var c=g(s),S;m(s,l)&&(S=c.replace(" "+l+" "," "),s.className=S.substring(1,S.length-1))}function g(s){return(" "+(s&&s.className||"")+" ").replace(/\s+/gi," ")}function v(s){s&&s.parentNode&&s.parentNode.removeChild(s)}return t})})(Ft);var Ui=Ft.exports;const Ji=mn(Ui),Wi=e=>{const n=Q("");return new Promise(t=>{re.confirm({title:F("inputFolderName"),content:()=>A(gn,{value:n.value,"onUpdate:value":i=>n.value=i},null),async onOk(){if(!n.value)return;const i=Te(e,n.value);await Hi(i),t()}})})},Qt=()=>A("p",{style:{background:"var(--zp-secondary-background)",padding:"8px",borderLeft:"4px solid var(--primary-color)"}},[R("Tips: "),F("multiSelectTips")]),yt=["blue","cyan","gold","green","lime","magenta","orange","pink","purple","red","yellow","geekblue","volcano"],Dt=Pt("useTagStore",()=>{const e=_t(new Map),n=async r=>{if(r=r.filter(p=>!e.has(p)),!!r.length)try{r.forEach(o=>e.set(o,[]));const p=await ei(r);for(const o in p)e.set(o,p[o])}catch{r.forEach(p=>e.delete(p))}},t=new Map;return{tagMap:e,getColor:r=>{let p=t.get(r);if(!p){const o=st.hash.sha256.hash(r),f=parseInt(st.codec.hex.fromBits(o),16)%yt.length;p=yt[f],t.set(r,p)}return p},fetchImageTags:n,refreshTags:async r=>{r.forEach(p=>e.delete(p)),await n(r)}}}),Ki=Pt("useBatchDownloadStore",()=>{const e=Q([]);return{selectdFiles:e,addFiles:t=>{e.value=yn([...e.value,...t])}}});function $e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!xn(e)}const Fe=new Map,N=We(),qi=Ki(),Lt=Dt(),bt=bn(),we=new BroadcastChannel("iib-image-transfer-bus"),{eventEmitter:Se,useEventListen:je}=Ot(),{useHookShareState:ee}=Ni((e,{images:n})=>{const t=Q({tabIdx:-1,paneIdx:-1}),i=j(()=>le(a.value)),a=Q([]),r=j(()=>{var c;return a.value.map(S=>S.curr).slice((c=N.conf)!=null&&c.is_win?1:0)}),p=j(()=>Te(...r.value)),o=Q(N.defaultSortingMethod),f=j(()=>{var u;if(n.value)return n.value;if(!i.value)return[];const c=((u=i.value)==null?void 0:u.files)??[],S=o.value,{walkFiles:h}=i.value,y=C=>N.onlyFoldersAndImages?C.filter(O=>O.type==="dir"||U(O.name)):C;return t.value.walkModePath?h?h.map(C=>de(y(C),S)).flat():de(y(c),S):de(y(c),S)}),m=Q([]),b=Q(-1),I=Q(!0),g=Q(!1),v=Q(!1),s=()=>{var c,S,h;return(h=(S=(c=N.tabList)==null?void 0:c[t.value.tabIdx])==null?void 0:S.panes)==null?void 0:h[t.value.paneIdx]},l=Ot();return l.useEventListen("selectAll",()=>{console.log(`select all 0 -> ${f.value.length}`),m.value=zt(0,f.value.length)}),{previewing:v,spinning:g,canLoadNext:I,multiSelectedIdxs:m,previewIdx:b,basePath:r,currLocation:p,currPage:i,stack:a,sortMethod:o,sortedFiles:f,scroller:Q(),stackViewEl:Q(),props:t,getPane:s,...l}},()=>({images:Q()}));function Ma(){const{previewIdx:e,eventEmitter:n,canLoadNext:t,previewing:i,sortedFiles:a,scroller:r,props:p}=ee().toRefs(),{state:o}=ee();let f=null;const m=(v,s)=>{var l;i.value=v,f!=null&&!v&&s&&((l=r.value)==null||l.scrollToItem(f),f=null)},b=()=>{p.value.walkModePath&&!g("next")&&t&&(q.info(F("loadingNextFolder")),n.value.emit("loadNextDir",!0))};pe("keydown",v=>{var s;if(i.value){let l=e.value;if(["ArrowDown","ArrowRight"].includes(v.key))for(l++;a.value[l]&&!U(a.value[l].name);)l++;else if(["ArrowUp","ArrowLeft"].includes(v.key))for(l--;a.value[l]&&!U(a.value[l].name);)l--;if(U((s=a.value[l])==null?void 0:s.name)??""){e.value=l;const c=r.value;c&&!(l>=c.$_startIndex&&l<=c.$_endIndex)&&(f=l)}b()}});const I=v=>{var l;let s=e.value;if(v==="next")for(s++;a.value[s]&&!U(a.value[s].name);)s++;else if(v==="prev")for(s--;a.value[s]&&!U(a.value[s].name);)s--;if(U((l=a.value[s])==null?void 0:l.name)??""){e.value=s;const c=r.value;c&&!(s>=c.$_startIndex&&s<=c.$_endIndex)&&(f=s)}b()},g=v=>{var l;let s=e.value;if(v==="next")for(s++;a.value[s]&&!U(a.value[s].name);)s++;else if(v==="prev")for(s--;a.value[s]&&!U(a.value[s].name);)s--;return U((l=a.value[s])==null?void 0:l.name)??""};return je("removeFiles",async()=>{var v;i.value&&!o.sortedFiles[e.value]&&(q.info(F("manualExitFullScreen"),5),await Ke(500),(v=document.querySelector(".ant-image-preview-operations-operation .anticon-close"))==null||v.click(),e.value=-1)}),{previewIdx:e,onPreviewVisibleChange:m,previewing:i,previewImgMove:I,canPreview:g}}function za(){const e=Q(),{scroller:n,stackViewEl:t,stack:i,currPage:a,currLocation:r,sortMethod:p,useEventListen:o,eventEmitter:f,getPane:m,props:b}=ee().toRefs();Ee(()=>i.value.length,_e((d,k)=>{var x;d!==k&&((x=n.value)==null||x.scrollToItem(0))},300));const I=async d=>{if(await c(d),b.value.walkModePath){await Ke();const[k]=de(a.value.files,p.value).filter(x=>x.type==="dir");k&&await c(k.fullpath),await f.value.emit("loadNextDir")}};wn(async()=>{var d;if(!i.value.length){const k=await ue("/");i.value.push({files:k.files,curr:"/"})}e.value=new Ji,e.value.configure({parent:t.value}),b.value.path&&b.value.path!=="/"?await I(b.value.walkModePath??b.value.path):(d=N.conf)!=null&&d.home&&c(N.conf.home)}),Ee(r,_e(d=>{const k=m.value();if(!k)return;k.path=d;const x=k.path.split("/").pop(),D=(()=>{var W;if(!b.value.walkModePath){const H=Ae(d);for(const[ne,ie]of Object.entries(N.pathAliasMap))if(H.startsWith(ie))return H.replace(ie,ne);return x}return"Walk: "+(((W=N.quickMovePaths.find(H=>H.dir===k.walkModePath))==null?void 0:W.zh)??x)})();k.name=Ne("div",{style:"display:flex;align-items:center"},[Ne(Fi),Ne("span",{class:"line-clamp-1",style:"max-width: 256px"},D)]),k.nameFallbackStr=D,N.recent=N.recent.filter(W=>W.key!==k.key),N.recent.unshift({path:d,key:k.key}),N.recent.length>20&&(N.recent=N.recent.slice(0,20))},300));const g=()=>Le(r.value),v=async d=>{var k,x;if(d.type==="dir")try{(k=e.value)==null||k.start();const{files:$}=await ue(d.fullpath);i.value.push({files:$,curr:d.name})}finally{(x=e.value)==null||x.done()}},s=d=>{for(;d<i.value.length-1;)i.value.pop()},l=(d,k)=>(De(N.conf,"global.conf load failed"),N.conf.is_win?d.toLowerCase()==k.toLowerCase():d==k),c=async d=>{var x,$;const k=i.value.slice();try{An(d)||(d=Te(((x=N.conf)==null?void 0:x.sd_cwd)??"/",d));const D=lt(d),W=i.value.map(H=>H.curr);for(W.shift();W[0]&&D[0]&&l(W[0],D[0]);)W.shift(),D.shift();for(let H=0;H<W.length;H++)i.value.pop();if(!D.length)return S();for(const H of D){const ne=($=a.value)==null?void 0:$.files.find(ie=>l(ie.name,H));if(!ne)throw console.error({frags:D,frag:H,stack:xt(i.value)}),new Error(`${H} not found`);await v(ne)}}catch(D){throw q.error(F("moveFailedCheckPath")+(D instanceof Error?D.message:"")),console.error(d,lt(d),a.value),i.value=k,D}},S=ot(async()=>{var d,k,x;try{if((d=e.value)==null||d.start(),b.value.walkModePath)s(0),await I(b.value.walkModePath);else{const{files:$}=await ue(i.value.length===1?"/":r.value);le(i.value).files=$}(k=n.value)==null||k.scrollToItem(0),q.success(F("refreshCompleted"))}finally{(x=e.value)==null||x.done()}});Sn("returnToIIB",ot(async()=>{var d,k;if(!b.value.walkModePath)try{(d=e.value)==null||d.start();const{files:x}=await ue(i.value.length===1?"/":r.value);le(i.value).files.map(D=>D.date).join()!==x.map(D=>D.date).join()&&(le(i.value).files=x,q.success(F("autoUpdate")))}finally{(k=e.value)==null||k.done()}})),o.value("refresh",S);const h=d=>{b.value.walkModePath&&(m.value().walkModePath=d),I(d)},y=j(()=>N.quickMovePaths.map(d=>({...d,path:Ae(d.dir)}))),u=j(()=>{const d=Ae(r.value);return y.value.find(x=>x.path===d)}),C=async()=>{const d=u.value;if(d){if(!d.can_delete)return;await ti(r.value),q.success(F("removeComplete"))}else await ni(r.value),q.success(F("addComplete"));ct.emit("searchIndexExpired"),ct.emit("updateGlobalSetting")},O=Q(!1),P=Q(r.value),E=()=>{O.value=!0,P.value=r.value},T=async()=>{await c(P.value),O.value=!1};return pe("click",()=>{O.value=!1}),{locInputValue:P,isLocationEditing:O,onLocEditEnter:T,onEditBtnClick:E,addToSearchScanPathAndQuickMove:C,searchPathInfo:u,refresh:S,copyLocation:g,back:s,openNext:v,currPage:a,currLocation:r,to:c,stack:i,scroller:n,share:()=>{const d=parent.location,k=d.href.substring(0,d.href.length-d.search.length),x=new URLSearchParams(d.search);x.set("action","open"),x.set("path",r.value);const $=`${k}?${x.toString()}`;Le($,F("copyLocationUrlSuccessMsg"))},selectAll:()=>f.value.emit("selectAll"),quickMoveTo:h,onCreateFloderBtnClick:async()=>{await Wi(r.value),await S()}}}function $a(){const{scroller:e,sortedFiles:n,stack:t,sortMethod:i,currLocation:a,currPage:r,stackViewEl:p,canLoadNext:o,previewIdx:f,props:m}=ee().toRefs(),{state:b}=ee(),I=Q(!1),g=Q(N.defaultGridCellWidth),v=j(()=>g.value+16),s=44,{width:l}=kn(p),c=j(()=>~~(l.value/v.value)),S=j(()=>{const P=v.value;return{first:P+(g.value<=160?0:s),second:P}}),h=Q(!1),y=async()=>{var P;if(!(h.value||!m.value.walkModePath||!o.value))try{h.value=!0;const E=t.value[t.value.length-2],T=de(E.files,i.value),_=T.findIndex(B=>{var w;return B.name===((w=r.value)==null?void 0:w.curr)});if(_!==-1){const B=T[_+1],w=Te(a.value,"../",B.name),d=await ue(w),k=r.value;k.curr=B.name,k.walkFiles||(k.walkFiles=[k.files]),k.walkFiles.push(d.files),console.log("curr page files length",(P=r.value)==null?void 0:P.files.length)}}catch(E){console.error("loadNextDir",E),o.value=!1}finally{h.value=!1}},u=async(P=!1)=>{const E=e.value,T=()=>P?f.value:(E==null?void 0:E.$_endIndex)??0;for(;!n.value.length||T()>n.value.length-20&&o.value;)await Ke(100),await y()};b.useEventListen("loadNextDir",u);const C=()=>{const P=e.value;if(P){const E=n.value.slice(Math.max(P.$_startIndex-10,0),P.$_endIndex+10).filter(T=>T.is_under_scanned_path&&U(T.name)).map(T=>T.fullpath);Lt.fetchImageTags(E)}};Ee(a,_e(C,150));const O=_e(()=>{u(),C()},300);return{gridItems:c,sortedFiles:n,sortMethodConv:Cn,moreActionsDropdownShow:I,gridSize:v,sortMethod:i,onScroll:O,loadNextDir:y,loadNextDirLoading:h,canLoadNext:o,itemSize:S,cellWidth:g,onViewedImagesChange:C}}function Fa(){const{currLocation:e,sortedFiles:n,currPage:t,multiSelectedIdxs:i,eventEmitter:a}=ee().toRefs(),r=()=>{i.value=[]};return pe("click",r),pe("blur",r),Ee(t,r),{onFileDragStart:(m,b)=>{const I=xt(n.value[b]);bt.fileDragging=!0,console.log("onFileDragStart set drag file ",m,b,I);const g=[I];let v=I.type==="dir";if(i.value.includes(b)){const l=i.value.map(c=>n.value[c]);g.push(...l),v=l.some(c=>c.type==="dir")}const s={includeDir:v,loc:e.value||"search-result",path:ut(g,"fullpath").map(l=>l.fullpath),nodes:ut(g,"fullpath"),__id:"FileTransferData"};m.dataTransfer.setData("text/plain",JSON.stringify(s))},onDrop:async m=>{const b=_n(m);if(!b)return;const I=e.value;if(b.loc===I)return;const g=Tt(),v=async()=>g.pushAction(async()=>{await Vi(b.path,I),a.value.emit("refresh"),re.destroyAll()}),s=()=>g.pushAction(async()=>{await $t(b.path,I),Se.emit("removeFiles",{paths:b.path,loc:b.loc}),a.value.emit("refresh"),re.destroyAll()});re.confirm({title:F("confirm")+"?",width:"60vw",content:()=>{let l,c,S;return A("div",null,[A("div",null,[`${F("moveSelectedFilesTo")} ${I}`,A("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[b.path.map(h=>A("li",null,[h.split(/[/\\]/).pop()]))])]),A(Qt,null,null),A("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},class:"actions"},[A(se,{onClick:re.destroyAll},$e(l=F("cancel"))?l:{default:()=>[l]}),A(se,{type:"primary",loading:!g.isIdle,onClick:v},$e(c=F("copy"))?c:{default:()=>[c]}),A(se,{type:"primary",loading:!g.isIdle,onClick:s},$e(S=F("move"))?S:{default:()=>[S]})])])},maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},multiSelectedIdxs:i,onFileDragEnd:()=>{bt.fileDragging=!1}}}function Qa({openNext:e}){const n=Q(!1),t=Q(""),{sortedFiles:i,previewIdx:a,multiSelectedIdxs:r,stack:p,currLocation:o,spinning:f,previewing:m,stackViewEl:b,eventEmitter:I,props:g}=ee().toRefs(),v=Ae;je("removeFiles",({paths:h,loc:y})=>{if(v(y)!==v(o.value))return;const u=le(p.value);u&&(u.files=u.files.filter(C=>!h.includes(C.fullpath)),u.walkFiles&&(u.walkFiles=u.walkFiles.map(C=>C.filter(O=>!h.includes(O.fullpath)))))}),je("addFiles",({files:h,loc:y})=>{if(v(y)!==v(o.value))return;const u=le(p.value);u&&u.files.unshift(...h)});const s=Tt(),l=async(h,y,u)=>{a.value=u,N.fullscreenPreviewInitialUrl=te(y);const C=r.value.indexOf(u);if(h.shiftKey){if(C!==-1)r.value.splice(C,1);else{r.value.push(u),r.value.sort((E,T)=>E-T);const O=r.value[0],P=r.value[r.value.length-1];r.value=zt(O,P+1)}h.stopPropagation()}else h.ctrlKey||h.metaKey?(C!==-1?r.value.splice(C,1):r.value.push(u),h.stopPropagation()):await e(y)},c=async(h,y,u)=>{var T,_,B;const C=te(y),O=o.value,P=()=>{let w=[];return r.value.includes(u)?w=r.value.map(d=>i.value[d]):w.push(y),w},E=async w=>{if(!f.value)try{f.value=!0,await Tn(y.fullpath),we.postMessage(JSON.stringify({event:"click_hidden_button",btnEleId:"iib_hidden_img_update_trigger"}));const d=setTimeout(()=>Bn.warn({message:F("long_loading"),duration:20}),5e3);await Nn(),clearTimeout(d),we.postMessage(JSON.stringify({event:"click_hidden_button",btnEleId:`iib_hidden_tab_${w}`}))}catch(d){console.error(d),q.error("发送图像失败，请携带console的错误消息找开发者")}finally{f.value=!1}};if(`${h.key}`.startsWith("toggle-tag-")){const w=+`${h.key}`.split("toggle-tag-")[1],{is_remove:d}=await ii({tag_id:w,img_path:y.fullpath}),k=(_=(T=N.conf)==null?void 0:T.all_custom_tags.find(x=>x.id===w))==null?void 0:_.name;Lt.refreshTags([y.fullpath]),q.success(F(d?"removedTagFromImage":"addedTagToImage",{tag:k}));return}switch(h.key){case"previewInNewWindow":return window.open(C);case"download":return window.open(te(y,!0));case"copyPreviewUrl":return Le(parent.document.location.origin+C);case"send2txt2img":return E("txt2img");case"send2img2img":return E("img2img");case"send2inpaint":return E("inpaint");case"send2extras":return E("extras");case"send2savedDir":{const w=N.quickMovePaths.find(x=>x.key==="outdir_save");if(!w)return q.error(F("unknownSavedDir"));const d=On(w.dir,(B=N.conf)==null?void 0:B.sd_cwd),k=P();await $t(k.map(x=>x.fullpath),d,!0),Se.emit("removeFiles",{paths:k.map(x=>x.fullpath),loc:o.value}),Se.emit("addFiles",{files:k,loc:d});break}case"send2controlnet-img2img":case"send2controlnet-txt2img":{const w=h.key.split("-")[1];we.postMessage(JSON.stringify({event:"send_to_control_net",type:w,url:te(y)}));break}case"send2outpaint":{t.value=await s.pushAction(()=>dt(y.fullpath)).res;const[w,d]=(t.value||"").split(`
`);we.postMessage(JSON.stringify({event:"send_to_outpaint",url:te(y),prompt:w,negPrompt:d.slice(17)}));break}case"openWithWalkMode":{Fe.set(O,p.value);const w=N.tabList[g.value.tabIdx],d={type:"local",key:ge(),path:y.fullpath,name:F("local"),stackKey:O,walkModePath:y.fullpath};w.panes.push(d),w.key=d.key;break}case"openInNewTab":{Fe.set(O,p.value);const w=N.tabList[g.value.tabIdx],d={type:"local",key:ge(),path:y.fullpath,name:F("local"),stackKey:O};w.panes.push(d),w.key=d.key;break}case"openOnTheRight":{Fe.set(O,p.value);let w=N.tabList[g.value.tabIdx+1];w||(w={panes:[],key:"",id:ge()},N.tabList[g.value.tabIdx+1]=w);const d={type:"local",key:ge(),path:y.fullpath,name:F("local"),stackKey:O};w.panes.push(d),w.key=d.key;break}case"send2BatchDownload":{qi.addFiles(P());break}case"viewGenInfo":{n.value=!0,t.value=await s.pushAction(()=>dt(y.fullpath)).res;break}case"openWithLocalFileBrowser":{await Pn(y.fullpath);break}case"deleteFiles":{const w=P();await new Promise(d=>{re.confirm({title:F("confirmDelete"),maskClosable:!0,width:"60vw",content:A("div",null,[A("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[w.map(k=>A("li",null,[k.fullpath.split(/[/\\]/).pop()]))]),A(Qt,null,null)]),async onOk(){const k=w.map(x=>x.fullpath);await ji(k),q.success(F("deleteSuccess")),Se.emit("removeFiles",{paths:k,loc:o.value}),d()}})});break}}return{}},{isOutside:S}=In(b);return pe("keydown",h=>{var u,C,O;const y=ai(h);if(m.value){const P=(u=Object.entries(N.shortcut).find(E=>E[1]===y&&E[1]))==null?void 0:u[0];if(P){h.stopPropagation(),h.preventDefault();const E=a.value,T=i.value[E];switch(P){case"delete":return te(T)===N.fullscreenPreviewInitialUrl?q.warn(F("fullscreenRestriction")):c({key:"deleteFiles"},T,E);default:{const _=(C=/^toggle_tag_(.*)$/.exec(P))==null?void 0:C[1],B=(O=N.conf)==null?void 0:O.all_custom_tags.find(w=>w.name===_);return B?c({key:`toggle-tag-${B.id}`},T,E):void 0}}}}else!S.value&&["Ctrl + KeyA","Cmd + KeyA"].includes(y)&&(h.preventDefault(),h.stopPropagation(),I.value.emit("selectAll"))}),{onFileItemClick:l,onContextMenuClick:c,showGenInfo:n,imageGenInfo:t,q:s}}const Da=()=>{const{stackViewEl:e}=ee().toRefs(),n=Q(-1);return En(e,t=>{var a;let i=t.target;for(;i.parentElement;)if(i=i.parentElement,i.tagName.toLowerCase()==="li"&&i.classList.contains("file-item-trigger")){const r=(a=i.dataset)==null?void 0:a.idx;r&&Number.isSafeInteger(+r)&&(n.value=+r);return}}),{showMenuIdx:n}};function Gi(){var e=window.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);var t=e.indexOf("Trident/");if(t>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var a=e.indexOf("Edge/");return a>0?parseInt(e.substring(a+5,e.indexOf(".",a)),10):-1}let ke;function Ve(){Ve.init||(Ve.init=!0,ke=Gi()!==-1)}var Be={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Ve(),Bt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",ke&&this.$el.appendChild(e),e.data="about:blank",ke||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!ke&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Yi=$n();Mn("data-v-b329ee4c");const Zi={class:"resize-observer",tabindex:"-1"};zn();const Xi=Yi((e,n,t,i,a,r)=>(z(),J("div",Zi)));Be.render=Xi;Be.__scopeId="data-v-b329ee4c";Be.__file="src/components/ResizeObserver.vue";function Ce(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ce=function(n){return typeof n}:Ce=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ce(e)}function ea(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function wt(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ta(e,n,t){return n&&wt(e.prototype,n),t&&wt(e,t),e}function At(e){return na(e)||ia(e)||aa(e)||ra()}function na(e){if(Array.isArray(e))return He(e)}function ia(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function aa(e,n){if(e){if(typeof e=="string")return He(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return He(e,n)}}function He(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function ra(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sa(e){var n;return typeof e=="function"?n={callback:e}:n=e,n}function la(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,a,r,p=function(f){for(var m=arguments.length,b=new Array(m>1?m-1:0),I=1;I<m;I++)b[I-1]=arguments[I];if(r=b,!(i&&f===a)){var g=t.leading;typeof g=="function"&&(g=g(f,a)),(!i||f!==a)&&g&&e.apply(void 0,[f].concat(At(r))),a=f,clearTimeout(i),i=setTimeout(function(){e.apply(void 0,[f].concat(At(r))),i=0},n)}};return p._clear=function(){clearTimeout(i),i=null},p}function Rt(e,n){if(e===n)return!0;if(Ce(e)==="object"){for(var t in e)if(!Rt(e[t],n[t]))return!1;return!0}return!1}var oa=function(){function e(n,t,i){ea(this,e),this.el=n,this.observer=null,this.frozen=!1,this.createObserver(t,i)}return ta(e,[{key:"createObserver",value:function(t,i){var a=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=sa(t),this.callback=function(o,f){a.options.callback(o,f),o&&a.options.once&&(a.frozen=!0,a.destroyObserver())},this.callback&&this.options.throttle){var r=this.options.throttleOptions||{},p=r.leading;this.callback=la(this.callback,this.options.throttle,{leading:function(f){return p==="both"||p==="visible"&&f||p==="hidden"&&!f}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(o){var f=o[0];if(o.length>1){var m=o.find(function(I){return I.isIntersecting});m&&(f=m)}if(a.callback){var b=f.isIntersecting&&f.intersectionRatio>=a.threshold;if(b===a.oldResult)return;a.oldResult=b,a.callback(b,f)}},this.options.intersection),Bt(function(){a.observer&&a.observer.observe(a.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function jt(e,n,t){var i=n.value;if(i)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var a=new oa(e,i,t);e._vue_visibilityState=a}}function ca(e,n,t){var i=n.value,a=n.oldValue;if(!Rt(i,a)){var r=e._vue_visibilityState;if(!i){Vt(e);return}r?r.createObserver(i,t):jt(e,{value:i},t)}}function Vt(e){var n=e._vue_visibilityState;n&&(n.destroyObserver(),delete e._vue_visibilityState)}var ua={beforeMount:jt,updated:ca,unmounted:Vt},da={itemsLimit:1e3},fa=/(auto|scroll)/;function Ht(e,n){return e.parentNode===null?n:Ht(e.parentNode,n.concat([e]))}var Qe=function(n,t){return getComputedStyle(n,null).getPropertyValue(t)},va=function(n){return Qe(n,"overflow")+Qe(n,"overflow-y")+Qe(n,"overflow-x")},pa=function(n){return fa.test(va(n))};function St(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var n=Ht(e.parentNode,[]),t=0;t<n.length;t+=1)if(pa(n[t]))return n[t];return document.scrollingElement||document.documentElement}}function Ue(e){"@babel/helpers - typeof";return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ue(e)}var ha={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(n){return["vertical","horizontal"].includes(n)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function ma(){return this.items.length&&Ue(this.items[0])!=="object"}var Je=!1;if(typeof window<"u"){Je=!1;try{var ga=Object.defineProperty({},"passive",{get:function(){Je=!0}});window.addEventListener("test",null,ga)}catch{}}let ya=0;var Ut={name:"RecycleScroller",components:{ResizeObserver:Be},directives:{ObserveVisibility:ua},props:{...ha,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},n=this.items,t=this.sizeField,i=this.minItemSize;let a=1e4,r=0,p;for(let o=0,f=n.length;o<f;o++)p=n[o][t]||i,p<a&&(a=p),r+=p,e[o]={accumulator:r,size:p};return this.$_computedMinItemSize=a,e}return[]},simpleArray:ma,itemIndexByKey(){const{keyField:e,items:n}=this,t={};for(let i=0,a=n.length;i<a;i++)t[n[i][e]]=i;return t}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,n,t,i,a){const r=Fn({id:ya++,index:n,used:!0,key:i,type:a}),p=Qn({item:t,position:0,nr:r});return e.push(p),p},unuseView(e,n=!1){const t=this.$_unusedViews,i=e.nr.type;let a=t.get(i);a||(a=[],t.set(i,a)),a.push(e),n||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const n=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:t}=this.updateVisibleItems(!1,!0);t||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});n(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&n()},this.updateInterval))}},handleVisibilityChange(e,n){this.ready&&(e||n.boundingClientRect.width!==0||n.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,n=!1){const t=this.itemSize,i=this.gridItems||1,a=this.itemSecondarySize||t,r=this.$_computedMinItemSize,p=this.typeField,o=this.simpleArray?null:this.keyField,f=this.items,m=f.length,b=this.sizes,I=this.$_views,g=this.$_unusedViews,v=this.pool,s=this.itemIndexByKey;let l,c,S,h,y;if(!m)l=c=h=y=S=0;else if(this.$_prerender)l=h=0,c=y=Math.min(this.prerender,f.length),S=null;else{const _=this.getScroll();if(n){let d=_.start-this.$_lastUpdateScrollPosition;if(d<0&&(d=-d),t===null&&d<r||d<t)return{continuous:!0}}this.$_lastUpdateScrollPosition=_.start;const B=this.buffer;_.start-=B,_.end+=B;let w=0;if(this.$refs.before&&(w=this.$refs.before.scrollHeight,_.start-=w),this.$refs.after){const d=this.$refs.after.scrollHeight;_.end+=d}if(t===null){let d,k=0,x=m-1,$=~~(m/2),D;do D=$,d=b[$].accumulator,d<_.start?k=$:$<m-1&&b[$+1].accumulator>_.start&&(x=$),$=~~((k+x)/2);while($!==D);for($<0&&($=0),l=$,S=b[m-1].accumulator,c=$;c<m&&b[c].accumulator<_.end;c++);for(c===-1?c=f.length-1:(c++,c>m&&(c=m)),h=l;h<m&&w+b[h].accumulator<_.start;h++);for(y=h;y<m&&w+b[y].accumulator<_.end;y++);}else{l=~~(_.start/t*i);const d=l%i;l-=d,c=Math.ceil(_.end/t*i),h=Math.max(0,Math.floor((_.start-w)/t*i)),y=Math.floor((_.end-w)/t*i),l<0&&(l=0),c>m&&(c=m),h<0&&(h=0),y>m&&(y=m),S=Math.ceil(m/i)*t}}c-l>da.itemsLimit&&this.itemsLimitError(),this.totalSize=S;let u;const C=l<=this.$_endIndex&&c>=this.$_startIndex;if(C)for(let _=0,B=v.length;_<B;_++)u=v[_],u.nr.used&&(e&&(u.nr.index=s[u.item[o]]),(u.nr.index==null||u.nr.index<l||u.nr.index>=c)&&this.unuseView(u));const O=C?null:new Map;let P,E,T;for(let _=l;_<c;_++){P=f[_];const B=o?P[o]:P;if(B==null)throw new Error(`Key is ${B} on item (keyField is '${o}')`);if(u=I.get(B),!t&&!b[_].size){u&&this.unuseView(u);continue}E=P[p];let w=g.get(E),d=!1;if(!u)C?w&&w.length?u=w.pop():u=this.addView(v,_,P,B,E):(T=O.get(E)||0,(!w||T>=w.length)&&(u=this.addView(v,_,P,B,E),this.unuseView(u,!0),w=g.get(E)),u=w[T],O.set(E,T+1)),I.delete(u.nr.key),u.nr.used=!0,u.nr.index=_,u.nr.key=B,u.nr.type=E,I.set(B,u),d=!0;else if(!u.nr.used&&(u.nr.used=!0,u.nr.index=_,d=!0,w)){const k=w.indexOf(u);k!==-1&&w.splice(k,1)}u.item=P,d&&(_===f.length-1&&this.$emit("scroll-end"),_===0&&this.$emit("scroll-start")),t===null?(u.position=b[_-1].accumulator,u.offset=0):(u.position=Math.floor(_/i)*t,u.offset=_%i*a)}return this.$_startIndex=l,this.$_endIndex=c,this.emitUpdate&&this.$emit("update",l,c,h,y),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:C}},getListenerTarget(){let e=St(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:n}=this,t=n==="vertical";let i;if(this.pageMode){const a=e.getBoundingClientRect(),r=t?a.height:a.width;let p=-(t?a.top:a.left),o=t?window.innerHeight:window.innerWidth;p<0&&(o+=p,p=0),p+o>r&&(o=r-p),i={start:p,end:p+o}}else t?i={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:i={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return i},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Je?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let n;const t=this.gridItems||1;this.itemSize===null?n=e>0?this.sizes[e-1].accumulator:0:n=Math.floor(e/t)*this.itemSize,this.scrollToPosition(n)},scrollToPosition(e){const n=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let t,i,a;if(this.pageMode){const r=St(this.$el),p=r.tagName==="HTML"?0:r[n.scroll],o=r.getBoundingClientRect(),m=this.$el.getBoundingClientRect()[n.start]-o[n.start];t=r,i=n.scroll,a=e+p+m}else t=this.$el,i=n.scroll,a=e;t[i]=a},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,n)=>e.nr.index-n.nr.index)}}};const ba={key:0,ref:"before",class:"vue-recycle-scroller__slot"},wa={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Aa(e,n,t,i,a,r){const p=Dn("ResizeObserver"),o=Ln("observe-visibility");return Rn((z(),V("div",{class:Pe(["vue-recycle-scroller",{ready:a.ready,"page-mode":t.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:n[0]||(n[0]=(...f)=>r.handleScroll&&r.handleScroll(...f))},[e.$slots.before?(z(),V("div",ba,[ye(e.$slots,"before")],512)):G("v-if",!0),(z(),J(ft(t.listTag),{ref:"wrapper",style:Hn({[e.direction==="vertical"?"minHeight":"minWidth"]:a.totalSize+"px"}),class:Pe(["vue-recycle-scroller__item-wrapper",t.listClass])},{default:M(()=>[(z(!0),V(Z,null,qe(a.pool,f=>(z(),J(ft(t.itemTag),jn({key:f.nr.id,style:a.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${f.position}px) translate${e.direction==="vertical"?"X":"Y"}(${f.offset}px)`,width:t.gridItems?`${e.direction==="vertical"&&t.itemSecondarySize||t.itemSize}px`:void 0,height:t.gridItems?`${e.direction==="horizontal"&&t.itemSecondarySize||t.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[t.itemClass,{hover:!t.skipHover&&a.hoverKey===f.nr.key}]]},Vn(t.skipHover?{}:{mouseenter:()=>{a.hoverKey=f.nr.key},mouseleave:()=>{a.hoverKey=null}})),{default:M(()=>[ye(e.$slots,"default",{item:f.item,index:f.nr.index,active:f.nr.used})]),_:2},1040,["style","class"]))),128)),ye(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(z(),V("div",wa,[ye(e.$slots,"after")],512)):G("v-if",!0),A(p,{onNotify:r.handleResize},null,8,["onNotify"])],34)),[[o,r.handleVisibilityChange]])}Ut.render=Aa;Ut.__file="src/components/RecycleScroller.vue";const kt=ce({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},disableDelete:{type:Boolean}},emits:["contextMenuClick"],setup(e,{emit:n}){const t=e,i=We(),a=j(()=>{var r;return(((r=i.conf)==null?void 0:r.all_custom_tags)??[]).reduce((p,o)=>[...p,{...o,selected:!!t.selectedTag.find(f=>f.id===o.id)}],[])});return(r,p)=>{const o=Un,f=Jn,m=Wn,b=Kn;return z(),J(b,{onClick:p[0]||(p[0]=I=>n("contextMenuClick",I,r.file,r.idx))},{default:M(()=>{var I;return[A(o,{key:"deleteFiles",disabled:r.disableDelete},{default:M(()=>[R(L(r.$t("deleteSelected")),1)]),_:1},8,["disabled"]),r.file.type==="dir"?(z(),V(Z,{key:0},[A(o,{key:"openInNewTab"},{default:M(()=>[R(L(r.$t("openInNewTab")),1)]),_:1}),A(o,{key:"openOnTheRight"},{default:M(()=>[R(L(r.$t("openOnTheRight")),1)]),_:1}),A(o,{key:"openWithWalkMode"},{default:M(()=>[R(L(r.$t("openWithWalkMode")),1)]),_:1})],64)):G("",!0),r.file.type==="file"?(z(),V(Z,{key:1},[K(U)(r.file.name)?(z(),V(Z,{key:0},[A(o,{key:"viewGenInfo"},{default:M(()=>[R(L(r.$t("viewGenerationInfo")),1)]),_:1}),A(f),((I=K(i).conf)==null?void 0:I.launch_mode)!=="server"?(z(),V(Z,{key:0},[A(o,{key:"send2txt2img"},{default:M(()=>[R(L(r.$t("sendToTxt2img")),1)]),_:1}),A(o,{key:"send2img2img"},{default:M(()=>[R(L(r.$t("sendToImg2img")),1)]),_:1}),A(o,{key:"send2inpaint"},{default:M(()=>[R(L(r.$t("sendToInpaint")),1)]),_:1}),A(o,{key:"send2extras"},{default:M(()=>[R(L(r.$t("sendToExtraFeatures")),1)]),_:1}),A(m,{key:"sendToThirdPartyExtension",title:r.$t("sendToThirdPartyExtension")},{default:M(()=>[A(o,{key:"send2controlnet-txt2img"},{default:M(()=>[R("ControlNet - "+L(r.$t("t2i")),1)]),_:1}),A(o,{key:"send2controlnet-img2img"},{default:M(()=>[R("ControlNet - "+L(r.$t("i2i")),1)]),_:1}),A(o,{key:"send2outpaint"},{default:M(()=>[R("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):G("",!0),A(o,{key:"send2BatchDownload"},{default:M(()=>[R(L(r.$t("sendToBatchDownload")),1)]),_:1}),A(o,{key:"send2savedDir"},{default:M(()=>[R(L(r.$t("send2savedDir")),1)]),_:1}),A(f),A(m,{key:"toggle-tag",title:r.$t("toggleTag")},{default:M(()=>[(z(!0),V(Z,null,qe(a.value,g=>(z(),J(o,{key:`toggle-tag-${g.id}`},{default:M(()=>[R(L(g.name)+" ",1),g.selected?(z(),J(K(gi),{key:0})):(z(),J(K(Ri),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"]),A(o,{key:"openWithLocalFileBrowser"},{default:M(()=>[R(L(r.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):G("",!0),A(o,{key:"previewInNewWindow"},{default:M(()=>[R(L(r.$t("previewInNewWindow")),1)]),_:1}),A(o,{key:"download"},{default:M(()=>[R(L(r.$t("download")),1)]),_:1}),A(o,{key:"copyPreviewUrl"},{default:M(()=>[R(L(r.$t("copySourceFilePreviewLink")),1)]),_:1})],64)):G("",!0)]}),_:1})}}}),Sa=["data-idx"],ka={class:"more"},Ca={key:0,class:"tags-container"},Ia={key:3,class:"preview-icon-wrap"},Ea={key:4,class:"profile"},_a={class:"name line-clamp-1"},Pa={class:"basic-info"},Oa=ce({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","previewVisibleChange","contextMenuClick","close-icon-click"],setup(e,{emit:n}){const t=e;qn(o=>({aaf8adf2:o.$props.cellWidth+"px"}));const i=We(),a=Dt(),r=j(()=>a.tagMap.get(t.file.fullpath)??[]),p=j(()=>{const o=i.gridThumbnailResolution;return i.enableThumbnail?Gn(t.file,[o,o].join("x")):te(t.file)});return(o,f)=>{const m=oe,b=Zn,I=vi;return z(),J(m,{trigger:["contextmenu"],visible:K(i).longPressOpenContextMenu?typeof o.idx=="number"&&o.showMenuIdx===o.idx:void 0,"onUpdate:visible":f[6]||(f[6]=g=>typeof o.idx=="number"&&n("update:showMenuIdx",g?o.idx:-1))},{overlay:M(()=>[o.enableRightClickMenu?(z(),J(kt,{key:0,file:o.file,idx:o.idx,"selected-tag":r.value,onContextMenuClick:f[5]||(f[5]=(g,v,s)=>n("contextMenuClick",g,v,s))},null,8,["file","idx","selected-tag"])):G("",!0)]),default:M(()=>[(z(),V("li",{class:Pe(["file file-item-trigger grid",{clickable:o.file.type==="dir",selected:o.selected}]),"data-idx":o.idx,key:o.file.name,draggable:"true",onDragstart:f[2]||(f[2]=g=>n("dragstart",g,o.idx)),onDragend:f[3]||(f[3]=g=>n("dragend",g,o.idx)),onClickCapture:f[4]||(f[4]=g=>n("fileItemClick",g,o.file,o.idx))},[ae("div",null,[o.enableCloseIcon?(z(),V("div",{key:0,class:"close-icon",onClick:f[0]||(f[0]=g=>n("close-icon-click"))},[A(K(Yn))])):G("",!0),o.enableRightClickMenu?(z(),J(m,{key:1},{overlay:M(()=>[A(kt,{file:o.file,idx:o.idx,"selected-tag":r.value,onContextMenuClick:f[1]||(f[1]=(g,v,s)=>n("contextMenuClick",g,v,s))},null,8,["file","idx","selected-tag"])]),default:M(()=>[ae("div",ka,[A(K(It))])]),_:1})):G("",!0),K(U)(o.file.name)?(z(),V("div",{style:{position:"relative"},key:o.file.fullpath,class:Pe(`idx-${o.idx}`)},[A(b,{src:p.value,fallback:K(Bi),preview:{src:o.fullScreenPreviewImageUrl,onVisibleChange:(g,v)=>n("previewVisibleChange",g,v)}},null,8,["src","fallback","preview"]),r.value&&o.cellWidth>128?(z(),V("div",Ca,[(z(!0),V(Z,null,qe(r.value,g=>(z(),J(I,{key:g.id,color:K(a).getColor(g.name)},{default:M(()=>[R(L(g.name),1)]),_:2},1032,["color"]))),128))])):G("",!0)],2)):(z(),V("div",Ia,[o.file.type==="file"?(z(),J(K(Ai),{key:0,class:"icon center"})):(z(),J(K(Ii),{key:1,class:"icon center"}))])),o.cellWidth>128?(z(),V("div",Ea,[ae("div",_a,L(o.file.name),1),ae("div",Pa,[ae("div",null,L(o.file.size),1),ae("div",null,L(o.file.date),1)])])):G("",!0)])],42,Sa))]),_:1},8,["visible"])}}});const La=Xn(Oa,[["__scopeId","data-v-eb7b4ec8"]]);export{oe as D,La as F,gi as S,kt as _,za as a,$a as b,Fa as c,Qa as d,Ma as e,Da as f,Ut as g,Dt as h,je as i,pe as j,Ri as k,vi as l,Ki as m,Fe as s,ee as u};
