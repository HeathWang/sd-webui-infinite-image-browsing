import{d as Y,u as ie,g as U,_ as xe,c as a,a as re,P as X,D as Se,f as Pe,w as He,b as Je,e as Xe,h as he,M as oe,i as Ye,j as Ze,F as se,k as et,l as tt,o as d,m as F,n as i,p as u,q as k,r as e,s as T,t as nt,v as c,x as j,y as x,z as ne,A as ae,B as at,C as rt,E as L,G as ot,H as st,S as lt,I as it,J as ut,K as dt,L as ct,N as we,O as pt,Q as mt,R as vt,T as ft,U as kt,V as gt,W as bt,X as _t}from"./index-24041d00.js";import{S as q,s as Ct,L as yt,R as ht,f as wt}from"./fullScreenContextMenu-fb07cfd1.js";import{F as N,N as It,_ as xt}from"./numInput-8adc0e3b.js";import"./shortcut-f1370d0c.js";import{D as Me,u as St,a as Pt,b as Mt,c as $t,d as At,e as Rt,f as Bt,s as Dt,g as Ft,F as Nt}from"./FileItem-ce43e0c3.js";/* empty css              *//* empty css              */import"./db-df8b57f9.js";var Et=["class","style"],Tt=function(){return{prefixCls:String,href:String,separator:X.any,overlay:X.any,onClick:Function}};const W=Y({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Tt(),slots:["separator","overlay"],setup:function(o,C){var v=C.slots,g=C.attrs,h=ie("breadcrumb",o),y=h.prefixCls,S=function(w,p){var s=U(v,o,"overlay");return s?a(Me,{overlay:s,placement:"bottom"},{default:function(){return[a("span",{class:"".concat(p,"-overlay-link")},[w,a(Se,null,null)])]}}):w};return function(){var P,w=(P=U(v,o,"separator"))!==null&&P!==void 0?P:"/",p=U(v,o),s=g.class,b=g.style,f=xe(g,Et),m;return o.href!==void 0?m=a("a",re({class:"".concat(y.value,"-link"),onClick:o.onClick},f),[p]):m=a("span",re({class:"".concat(y.value,"-link"),onClick:o.onClick},f),[p]),m=S(m,y.value),p?a("span",{class:s,style:b},[m,w&&a("span",{class:"".concat(y.value,"-separator")},[w])]):null}}});var Vt=function(){return{prefixCls:String,routes:{type:Array},params:X.any,separator:X.any,itemRender:{type:Function}}};function zt(r,o){if(!r.breadcrumbName)return null;var C=Object.keys(o).join("|"),v=r.breadcrumbName.replace(new RegExp(":(".concat(C,")"),"g"),function(g,h){return o[h]||g});return v}function Ie(r){var o=r.route,C=r.params,v=r.routes,g=r.paths,h=v.indexOf(o)===v.length-1,y=zt(o,C);return h?a("span",null,[y]):a("a",{href:"#/".concat(g.join("/"))},[y])}const V=Y({compatConfig:{MODE:3},name:"ABreadcrumb",props:Vt(),slots:["separator","itemRender"],setup:function(o,C){var v=C.slots,g=ie("breadcrumb",o),h=g.prefixCls,y=g.direction,S=function(s,b){return s=(s||"").replace(/^\//,""),Object.keys(b).forEach(function(f){s=s.replace(":".concat(f),b[f])}),s},P=function(s,b,f){var m=Ye(s),I=S(b||"",f);return I&&m.push(I),m},w=function(s){var b=s.routes,f=b===void 0?[]:b,m=s.params,I=m===void 0?{}:m,M=s.separator,$=s.itemRender,A=$===void 0?Ie:$,R=[];return f.map(function(_){var B=S(_.path,I);B&&R.push(B);var z=[].concat(R),O=null;return _.children&&_.children.length&&(O=a(oe,null,{default:function(){return[_.children.map(function(E){return a(oe.Item,{key:E.path||E.breadcrumbName},{default:function(){return[A({route:E,params:I,routes:f,paths:P(z,E.path,I)})]}})})]}})),a(W,{overlay:O,separator:M,key:B||_.breadcrumbName},{default:function(){return[A({route:_,params:I,routes:f,paths:z})]}})})};return function(){var p,s,b,f=o.routes,m=o.params,I=m===void 0?{}:m,M=Pe(U(v,o)),$=(p=U(v,o,"separator"))!==null&&p!==void 0?p:"/",A=o.itemRender||v.itemRender||Ie;f&&f.length>0?b=w({routes:f,params:I,separator:$,itemRender:A}):M.length&&(b=M.map(function(_,B){return He(Je(_.type)==="object"&&(_.type.__ANT_BREADCRUMB_ITEM||_.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Xe(_,{separator:$,key:B})}));var R=(s={},he(s,h.value,!0),he(s,"".concat(h.value,"-rtl"),y.value==="rtl"),s);return a("div",{class:R},[b])}}});var Ot=["separator","class"],jt=function(){return{prefixCls:String}};const le=Y({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:jt(),setup:function(o,C){var v=C.slots,g=C.attrs,h=ie("breadcrumb",o),y=h.prefixCls;return function(){var S;g.separator;var P=g.class,w=xe(g,Ot),p=Pe((S=v.default)===null||S===void 0?void 0:S.call(v));return a("span",re({class:["".concat(y.value,"-separator"),P]},w),[p.length>0?p:"/"])}}});V.Item=W;V.Separator=le;V.install=function(r){return r.component(V.name,V),r.component(W.name,W),r.component(le.name,le),r};N.useInjectFormItemContext=Ze;N.ItemRest=se;N.install=function(r){return r.component(N.name,N),r.component(N.Item.name,N.Item),r.component(se.name,se),r};q.setDefaultIndicator=Ct;q.install=function(r){return r.component(q.name,q),r};const Lt={class:"hint"},Ut={class:"location-bar"},qt={key:0},Wt=["onClick"],Gt={key:3,style:{"margin-left":"8px"}},Kt={class:"actions"},Qt=["onClick"],Ht={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Jt={style:{padding:"4px"}},Xt={style:{padding:"4px"}},Yt={style:{padding:"4px"}},Zt={key:0,class:"view"},en={style:{padding:"16px 0 32px"}},tn={key:0,class:"preview-switch"},nn=Y({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},walkModePath:{},stackKey:{}},setup(r){const o=r,C=et(),{scroller:v,stackViewEl:g,props:h,multiSelectedIdxs:y,spinning:S}=St().toRefs(),{currLocation:P,currPage:w,refresh:p,copyLocation:s,back:b,openNext:f,stack:m,quickMoveTo:I,addToSearchScanPathAndQuickMove:M,searchPathInfo:$,locInputValue:A,isLocationEditing:R,onLocEditEnter:_,onEditBtnClick:B,share:z,selectAll:O,onCreateFloderBtnClick:G}=Pt(),{gridItems:E,sortMethodConv:ue,moreActionsDropdownShow:Z,sortedFiles:K,sortMethod:ee,itemSize:de,loadNextDir:$e,loadNextDirLoading:Ae,canLoadNext:Re,onScroll:Be,cellWidth:Q}=Mt(),{onDrop:De,onFileDragStart:Fe,onFileDragEnd:Ne}=$t(),{onFileItemClick:Ee,onContextMenuClick:ce,showGenInfo:H,imageGenInfo:pe,q:Te}=At({openNext:f}),{previewIdx:J,onPreviewVisibleChange:Ve,previewing:me,previewImgMove:ve,canPreview:fe}=Rt(),{showMenuIdx:te}=Bt();return tt(()=>o,()=>{h.value=o;const l=Dt.get(o.stackKey??"");l&&(m.value=l.slice())},{immediate:!0}),(l,t)=>{const ze=pt,Oe=mt,je=vt,ke=W,ge=V,Le=ft,Ue=kt,be=gt,qe=bt,We=oe,_e=Me,Ge=It,Ce=xt,Ke=N,Qe=q;return d(),F(Qe,{spinning:e(S),size:"large"},{default:i(()=>[a(ze,{style:{display:"none"}}),u("div",{ref_key:"stackViewEl",ref:g,onDragover:t[23]||(t[23]=k(()=>{},["prevent"])),onDrop:t[24]||(t[24]=k(n=>e(De)(n),["prevent"])),class:"container"},[a(je,{visible:e(H),"onUpdate:visible":t[1]||(t[1]=n=>T(H)?H.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>H.value=!1)},{cancelText:i(()=>[]),default:i(()=>[a(Oe,{active:"",loading:!e(Te).isIdle},{default:i(()=>[u("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(nt)(e(pe)))},[u("div",Lt,c(l.$t("doubleClickToCopy")),1),j(" "+c(e(pe)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),u("div",Ut,[o.walkModePath?(d(),x("div",qt,[a(Le,null,{title:i(()=>[j(c(l.$t("walk-mode-move-message")),1)]),default:i(()=>[a(ge,{style:{flex:"1"}},{default:i(()=>[(d(!0),x(ne,null,ae(e(m),(n,D)=>(d(),F(ke,{key:D},{default:i(()=>[u("span",null,c(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),1)]),_:2},1024))),128))]),_:1})]),_:1})])):(d(),x("div",{key:1,class:"breadcrumb",style:at({flex:e(R)?1:""})},[e(R)?(d(),F(Ue,{key:0,style:{flex:"1"},value:e(A),"onUpdate:value":t[3]||(t[3]=n=>T(A)?A.value=n:null),onClick:t[4]||(t[4]=k(()=>{},["stop"])),onPressEnter:e(_)},null,8,["value","onPressEnter"])):(d(),F(ge,{key:1,style:{flex:"1"}},{default:i(()=>[(d(!0),x(ne,null,ae(e(m),(n,D)=>(d(),F(ke,{key:D},{default:i(()=>[u("a",{onClick:k(ye=>e(b)(D),["prevent"])},c(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),9,Wt)]),_:2},1024))),128))]),_:1})),e(R)?(d(),F(be,{key:2,size:"small",onClick:e(_),type:"primary"},{default:i(()=>[j(c(l.$t("go")),1)]),_:1},8,["onClick"])):(d(),x("div",Gt,[u("a",{onClick:t[5]||(t[5]=k((...n)=>e(s)&&e(s)(...n),["prevent"])),style:{"margin-right":"4px"}},c(l.$t("copy")),1),u("a",{onClick:t[6]||(t[6]=k((...n)=>e(B)&&e(B)(...n),["prevent","stop"]))},c(l.$t("edit")),1)]))],4)),u("div",Kt,[u("a",{class:"opt",onClick:t[7]||(t[7]=k((...n)=>e(p)&&e(p)(...n),["prevent"]))},c(l.$t("refresh")),1),u("a",{class:"opt",onClick:t[8]||(t[8]=k((...n)=>e(O)&&e(O)(...n),["prevent","stop"]))},c(l.$t("selectAll")),1),e(rt)?L("",!0):(d(),x("a",{key:0,class:"opt",onClick:t[9]||(t[9]=k((...n)=>e(z)&&e(z)(...n),["prevent"]))},c(l.$t("share")),1)),a(_e,null,{overlay:i(()=>[a(We,null,{default:i(()=>[(d(!0),x(ne,null,ae(e(C).quickMovePaths,n=>(d(),F(qe,{key:n.dir},{default:i(()=>[u("a",{onClick:k(D=>e(I)(n.dir),["prevent"])},c(n.zh),9,Qt)]),_:2},1024))),128))]),_:1})]),default:i(()=>[u("a",{class:"opt",onClick:t[10]||(t[10]=k(()=>{},["prevent"]))},[j(c(l.$t("quickMove"))+" ",1),a(e(Se))])]),_:1}),a(_e,{trigger:["click"],visible:e(Z),"onUpdate:visible":t[19]||(t[19]=n=>T(Z)?Z.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:i(()=>[u("div",Ht,[a(Ke,ot(st({labelCol:{span:6},wrapperCol:{span:18}})),{default:i(()=>[a(Ce,{label:l.$t("gridCellWidth")},{default:i(()=>[a(Ge,{modelValue:e(Q),"onUpdate:modelValue":t[12]||(t[12]=n=>T(Q)?Q.value=n:null),max:1024,min:64,step:64},null,8,["modelValue"])]),_:1},8,["label"]),a(Ce,{label:l.$t("sortingMethod")},{default:i(()=>[a(e(lt),{value:e(ee),"onUpdate:value":t[13]||(t[13]=n=>T(ee)?ee.value=n:null),onClick:t[14]||(t[14]=k(()=>{},["stop"])),conv:e(ue),options:e(it)},null,8,["value","conv","options"])]),_:1},8,["label"]),u("div",Jt,[e($)?e($).can_delete?(d(),x("a",{key:1,onClick:t[16]||(t[16]=k((...n)=>e(M)&&e(M)(...n),["prevent"]))},c(l.$t("removeFromSearchScanPathAndQuickMove")),1)):L("",!0):(d(),x("a",{key:0,onClick:t[15]||(t[15]=k((...n)=>e(M)&&e(M)(...n),["prevent"]))},c(l.$t("addToSearchScanPathAndQuickMove")),1))]),u("div",Xt,[u("a",{onClick:t[17]||(t[17]=k(n=>e(ut)(e(P)+"/"),["prevent"]))},c(l.$t("openWithLocalFileBrowser")),1)]),u("div",Yt,[u("a",{onClick:t[18]||(t[18]=k((...n)=>e(G)&&e(G)(...n),["prevent"]))},c(l.$t("createFolder")),1)])]),_:1},16)])]),default:i(()=>[u("a",{class:"opt",onClick:t[11]||(t[11]=k(()=>{},["prevent"]))},c(l.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(w)?(d(),x("div",Zt,[a(e(Ft),{class:"file-list",items:e(K),ref_key:"scroller",ref:v,onScroll:e(Be),"item-size":e(de).first,"key-field":"fullpath","item-secondary-size":e(de).second,gridItems:e(E)},dt({default:i(({item:n,index:D})=>[a(Nt,{idx:D,file:n,"full-screen-preview-image-url":e(K)[e(J)]?e(ct)(e(K)[e(J)]):"","show-menu-idx":e(te),"onUpdate:showMenuIdx":t[20]||(t[20]=ye=>T(te)?te.value=ye:null),selected:e(y).includes(D),"cell-width":e(Q),onFileItemClick:e(Ee),onDragstart:e(Fe),onDragend:e(Ne),onPreviewVisibleChange:e(Ve),onContextMenuClick:e(ce)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick"])]),_:2},[o.walkModePath?{name:"after",fn:i(()=>[u("div",en,[a(be,{onClick:e($e),loading:e(Ae),block:"",type:"primary",disabled:!e(Re),ghost:""},{default:i(()=>[j(c(l.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])])]),key:"0"}:void 0]),1032,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(me)?(d(),x("div",tn,[a(e(yt),{onClick:t[21]||(t[21]=n=>e(ve)("prev")),class:we({disable:!e(fe)("prev")})},null,8,["class"]),a(e(ht),{onClick:t[22]||(t[22]=n=>e(ve)("next")),class:we({disable:!e(fe)("next")})},null,8,["class"])])):L("",!0)])):L("",!0)],544),e(me)?(d(),F(wt,{key:0,file:e(K)[e(J)],idx:e(J),onContextMenuClick:e(ce)},null,8,["file","idx","onContextMenuClick"])):L("",!0)]),_:1},8,["spinning"])}}});const pn=_t(nn,[["__scopeId","data-v-4d3aae06"]]);export{pn as default};
